<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="49,282" id="srcline282">282</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="49,283" id="srcline283">283</a></span><span class="line"><span class="comment">%% 阈值参数设置</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,284" id="srcline284">284</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S80T34U1156">makerTrackThreshold</span>,<span class="var type1" id="S81T36U1157">INSVNSCalibSet</span> ] = SetParameters(  )</span></span>
<span class="srcline"><span class="lineno"><a href="49,285" id="srcline285">285</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S82T0U1161">visionFre</span>  </span></span>
<span class="srcline"><span class="lineno"><a href="49,286" id="srcline286">286</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="49,287" id="srcline287">287</a></span><span class="line"><span class="mxinfo" id="T2:U3"><span class="var type1" id="S83T2U1164">moveTime</span> = <span class="mxinfo" id="T2:U5">2</span></span> ;          <span class="comment">% sec 轨迹连续判断时间步长</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,288" id="srcline288">288</a></span><span class="line"><span class="mxinfo" id="T2:U6"><span class="var type1" id="S84T2U1168">moveDistance</span> = <span class="mxinfo" id="T2:U8">0.5</span></span> ;      <span class="comment">% m   轨迹连续判断位移步长  （经验值建议0.4m-0.7m）</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,289" id="srcline289">289</a></span><span class="line"><span class="mxinfo" id="T2:U9"><span class="var type1" id="S85T2U1172">MaxMoveSpeed</span> = <span class="mxinfo" id="T2:U11">1.5</span></span> ; <span class="comment">% m/s  马克点运动允许的最大速度，超过这个速度则认为不连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,290" id="srcline290">290</a></span><span class="line"><span class="mxinfo" id="T2:U12"><span class="mxinfo" id="T2:U13"><span class="var type1" id="S80T34U1177">makerTrackThreshold</span>.moveTime</span> = <span class="mxinfo" id="T2:U15"><span class="var type1" id="S83T2U1179">moveTime</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="49,291" id="srcline291">291</a></span><span class="line"><span class="mxinfo" id="T2:U17"><span class="mxinfo" id="T2:U18"><span class="var type1" id="S80T34U1183">makerTrackThreshold</span>.MaxMoveTime</span> = <span class="mxinfo" id="T2:U20">3</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="49,292" id="srcline292">292</a></span><span class="line"><span class="mxinfo" id="T2:U21"><span class="mxinfo" id="T2:U22"><span class="var type1" id="S80T34U1189">makerTrackThreshold</span>.moveDistance</span> = <span class="mxinfo" id="T2:U24"><span class="var type1" id="S84T2U1191">moveDistance</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="49,293" id="srcline293">293</a></span><span class="line"><span class="mxinfo" id="T2:U26"><span class="mxinfo" id="T2:U27"><span class="var type1" id="S80T34U1195">makerTrackThreshold</span>.MaxContinuesDisplacement</span> = <span class="mxinfo" id="T2:U29">min( <span class="mxinfo" id="T2:U30"><span class="mxinfo" id="T2:U31"><span class="mxinfo" id="T2:U32">1</span>/<span class="var type1" id="S82T2U1202">visionFre</span></span>*<span class="mxinfo" id="T2:U34"><span class="var type1" id="S85T2U1203">MaxMoveSpeed</span></span></span>,<span class="mxinfo" id="T2:U36">0.1</span>)</span></span> ; <span class="comment">% 马克点连续判断最大位移模</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,294" id="srcline294">294</a></span><span class="line"><span class="mxinfo" id="T2:U37"><span class="mxinfo" id="T2:U38"><span class="var type1" id="S80T34U1208">makerTrackThreshold</span>.PositionErrorBear_dT</span> = <span class="mxinfo" id="T2:U40"><span class="mxinfo" id="T2:U41">0.05</span>*<span class="mxinfo" id="T2:U42"><span class="var type1" id="S83T2U1212">moveTime</span></span></span></span>;   <span class="comment">% 固定时间的最大运动距离误差（第一步）：位移差在这个范围内的，直接判定&lt;校验1&gt;通过</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,295" id="srcline295">295</a></span><span class="line"><span class="mxinfo" id="T2:U44"><span class="mxinfo" id="T2:U45"><span class="var type1" id="S80T34U1216">makerTrackThreshold</span>.ContinuesTrackedMagnifyRate</span> = <span class="mxinfo" id="T2:U47">1.3</span></span> ;      <span class="comment">% 当连续于跟踪成功的点时，放大PositionErrorBear_dT</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,296" id="srcline296">296</a></span><span class="line"><span class="mxinfo" id="T2:U48"><span class="var type1" id="S87T2U1221">MaxStaticSpeed</span> = <span class="mxinfo" id="T2:U50">0.1</span></span> ; <span class="comment">% m/s 静止时，允许惯性最大测量误差</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,297" id="srcline297">297</a></span><span class="line"><span class="mxinfo" id="T2:U51"><span class="mxinfo" id="T2:U52"><span class="var type1" id="S80T34U1226">makerTrackThreshold</span>.MaxStaticDisp_dT</span> = <span class="mxinfo" id="T2:U54">max(<span class="mxinfo" id="T2:U55"><span class="var type1" id="S87T2U1231">MaxStaticSpeed</span>*<span class="var type1" id="S83T2U1232">moveTime</span></span>,<span class="mxinfo" id="T2:U58">0.02</span>)</span></span> ;           <span class="comment">% 固定时间的最大运动距离误差（第二步）：（第一步不通过后）位移差的长度是惯性位移长度的MaxPositionError_dT倍以内</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,298" id="srcline298">298</a></span><span class="line"><span class="mxinfo" id="T2:U59"><span class="mxinfo" id="T2:U60"><span class="var type1" id="S80T34U1237">makerTrackThreshold</span>.MaxPositionError_dS</span> = <span class="mxinfo" id="T2:U62"><span class="mxinfo" id="T2:U63"><span class="var type1" id="S84T2U1240">moveDistance</span></span>*<span class="mxinfo" id="T2:U65">0.7</span></span></span>;     <span class="comment">% 运动固定距离位移的最大运动距离误差：运动距离的50% （主要是依赖角度约束）</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,299" id="srcline299">299</a></span><span class="line"><span class="mxinfo" id="T2:U66"><span class="mxinfo" id="T2:U67"><span class="var type1" id="S80T34U1245">makerTrackThreshold</span>.Max_dPAngle_dS</span> = <span class="mxinfo" id="T2:U69"><span class="mxinfo" id="T2:U70">20*pi</span>/<span class="mxinfo" id="T2:U71">180</span></span></span> ;      <span class="comment">% 运动固定距离位移的最大位移方向角度差</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,300" id="srcline300">300</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="49,301" id="srcline301">301</a></span><span class="line"><span class="mxinfo" id="T2:U72"><span class="mxinfo" id="T2:U73"><span class="var type1" id="S80T34U1256">makerTrackThreshold</span>.MaxMarkHighChange</span> = <span class="mxinfo" id="T2:U75">0.4</span></span> ;      <span class="comment">% m 惯性与视觉目标马克点高度差变化最大范围，用于剔除高度相差较大的点</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,302" id="srcline302">302</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="49,303" id="srcline303">303</a></span><span class="line"><span class="mxinfo" id="T35:U76"><span class="mxinfo" id="T35:U77"><span class="var type1" id="S80T34U1262">makerTrackThreshold</span>.MaxHighMoveErrRate</span> = <span class="mxinfo" id="T35:U79">[ <span class="mxinfo" id="T2:U80">-<span class="mxinfo" id="T2:U81">0.3</span></span>  <span class="mxinfo" id="T2:U82">0.5</span> ]</span></span> ;  <span class="comment">%  高度方向变化大时，若变化比例小于这个值，直接认定跟踪OK</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,304" id="srcline304">304</a></span><span class="line">        <span class="comment">% 发现高度方向的误差非常</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,305" id="srcline305">305</a></span><span class="line"><span class="mxinfo" id="T2:U83"><span class="mxinfo" id="T2:U84"><span class="var type1" id="S80T34U1272">makerTrackThreshold</span>.BigHighMove</span> = <span class="mxinfo" id="T2:U86">0.18</span></span> ;         <span class="comment">% m 大于这个值则认为高度方向变化大</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,306" id="srcline306">306</a></span><span class="line"><span class="comment">%% 坐标系标定参数</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,307" id="srcline307">307</a></span><span class="line"><span class="mxinfo" id="T2:U87"><span class="mxinfo" id="T2:U88"><span class="var type1" id="S81T36U1278">INSVNSCalibSet</span>.Min_xyNorm_Calib</span> = <span class="mxinfo" id="T2:U90">0.3</span></span> ; <span class="comment">% m  用于标定的数据的最小运动位移长度</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,308" id="srcline308">308</a></span><span class="line"><span class="mxinfo" id="T2:U91"><span class="mxinfo" id="T2:U92"><span class="var type1" id="S81T36U1284">INSVNSCalibSet</span>.MaxTime_Calib</span> = <span class="mxinfo" id="T2:U94">2</span></span>  ;  <span class="comment">% sec  用于标定的数据的最长时间</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,309" id="srcline309">309</a></span><span class="line"><span class="mxinfo" id="T2:U95"><span class="mxinfo" id="T2:U96"><span class="var type1" id="S81T36U1290">INSVNSCalibSet</span>.MaxVXY_DirectionChange_Calib</span> = <span class="mxinfo" id="T2:U98"><span class="mxinfo" id="T2:U99">30*pi</span>/<span class="mxinfo" id="T2:U100">180</span></span></span> ;     <span class="comment">% ° XY平面速度方向变化最大范围</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,310" id="srcline310">310</a></span><span class="line"><span class="mxinfo" id="T2:U101"><span class="mxinfo" id="T2:U102"><span class="var type1" id="S81T36U1301">INSVNSCalibSet</span>.MaxVZ_Calib</span> = <span class="mxinfo" id="T2:U104">0.1</span></span> ;     <span class="comment">% m/s Z方向速度最大绝对值</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,311" id="srcline311">311</a></span><span class="line"><span class="mxinfo" id="T2:U105"><span class="mxinfo" id="T2:U106"><span class="var type1" id="S81T36U1307">INSVNSCalibSet</span>.MinVXY_Calib</span> = <span class="mxinfo" id="T2:U108">0.2</span></span>;      <span class="comment">% m/s XY 平面速度模最小绝对值</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,312" id="srcline312">312</a></span><span class="line"><span class="mxinfo" id="T2:U109"><span class="mxinfo" id="T2:U110"><span class="var type1" id="S81T36U1313">INSVNSCalibSet</span>.angleUniformityErr</span> = <span class="mxinfo" id="T2:U112"><span class="mxinfo" id="T2:U113">10*pi</span>/<span class="mxinfo" id="T2:U114">180</span></span></span> ; <span class="comment">% ° 位移矢量方向均匀性误差</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,313" id="srcline313">313</a></span><span class="line"><span class="comment">% 速度计算</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,314" id="srcline314">314</a></span><span class="line"><span class="mxinfo" id="T2:U115"><span class="mxinfo" id="T2:U116"><span class="var type1" id="S81T36U1324">INSVNSCalibSet</span>.dT_CalV_Calib</span> = <span class="mxinfo" id="T2:U118">0.1</span></span> ; <span class="comment">% 计算速度时间步长（标定位移数据选择）</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,315" id="srcline315">315</a></span><span class="line"><span class="mxinfo" id="T2:U119"><span class="mxinfo" id="T2:U120"><span class="var type1" id="S81T36U1330">INSVNSCalibSet</span>.MinXYVNorm_CalAngle</span> = <span class="mxinfo" id="T2:U122">0.1</span></span> ;  <span class="comment">%  m/s xy速度模大于这个值才计算速度的反向</span></span></span>
<span class="srcline"><span class="lineno"><a href="49,316" id="srcline316">316</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="49,317" id="srcline317">317</a></span><span class="line"><span class="mxinfo" id="T2:U123"><span class="mxinfo" id="T2:U124"><span class="var type1" id="S80T34U1336">makerTrackThreshold</span>.INSMarkH0</span> = <span class="mxinfo" id="T2:U126">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="49,318" id="srcline318">318</a></span><span class="line"><span class="mxinfo" id="T2:U127"><span class="mxinfo" id="T2:U128"><span class="var type1" id="S80T34U1343">makerTrackThreshold</span>.VNSMarkH0</span> = <span class="mxinfo" id="T2:U130">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="49,319" id="srcline319">319</a></span><span class="line"></span></span>
</pre>
