<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,854" id="srcline854">854</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,855" id="srcline855">855</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,856" id="srcline856">856</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S758T29U5420">euler</span> = OneCToEuler_c( <span class="var type1" id="S759T13U5423">C</span>,<span class="var type1" id="S760T3U5424">rotateOrder</span>,<span class="var type1" id="S761T7U5425">rotateDirection</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,857" id="srcline857">857</a></span><span class="line">coder.inline(<span class="string">'never'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,858" id="srcline858">858</a></span><span class="line"><span class="mxinfo" id="T3:U5"><span class="var type1" id="S763T3U5434">euler1</span> = <span class="mxinfo" id="T3:U7">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,859" id="srcline859">859</a></span><span class="line"><span class="mxinfo" id="T3:U8"><span class="var type1" id="S764T3U5438">euler2</span> = <span class="mxinfo" id="T3:U10">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,860" id="srcline860">860</a></span><span class="line"><span class="mxinfo" id="T3:U11"><span class="var type1" id="S765T3U5442">euler3</span> = <span class="mxinfo" id="T3:U13">0</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,861" id="srcline861">861</a></span><span class="line"><span class="keyword">switch</span> <span class="var type1" id="S760T3U5445">rotateOrder</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,862" id="srcline862">862</a></span><span class="line">    <span class="keyword">case</span> 321 </span></span>
<span class="srcline"><span class="lineno"><a href="1,863" id="srcline863">863</a></span><span class="line">        <span class="mxinfo" id="T3:U15"><span class="var type1" id="S763T3U5450">euler1</span> = <span class="mxinfo" id="T3:U17">atan2( <span class="mxinfo" id="T3:U18"><span class="var type1" id="S759T13U5454">C</span>(<span class="mxinfo" id="T3:U20">1</span>,<span class="mxinfo" id="T3:U21">2</span>)</span>,<span class="mxinfo" id="T3:U22"><span class="var type1" id="S759T13U5458">C</span>(<span class="mxinfo" id="T3:U24">1</span>,<span class="mxinfo" id="T3:U25">1</span>)</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,864" id="srcline864">864</a></span><span class="line">        <span class="mxinfo" id="T3:U26"><span class="var type1" id="S764T3U5463">euler2</span> = <span class="mxinfo" id="T3:U28">asin( <span class="mxinfo" id="T3:U29">-<span class="mxinfo" id="T3:U30"><span class="var type1" id="S759T13U5468">C</span>(<span class="mxinfo" id="T3:U32">1</span>,<span class="mxinfo" id="T3:U33">3</span>)</span></span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,865" id="srcline865">865</a></span><span class="line">        <span class="comment">% euler2 = atan2( -C(1,3),sqrt( C(3,2)^2+C(3,3)^2 ) ) ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,866" id="srcline866">866</a></span><span class="line">        <span class="mxinfo" id="T3:U34"><span class="var type1" id="S765T3U5473">euler3</span> = <span class="mxinfo" id="T3:U36">atan2( <span class="mxinfo" id="T3:U37"><span class="var type1" id="S759T13U5477">C</span>(<span class="mxinfo" id="T3:U39">2</span>,<span class="mxinfo" id="T3:U40">3</span>)</span>,<span class="mxinfo" id="T3:U41"><span class="var type1" id="S759T13U5481">C</span>(<span class="mxinfo" id="T3:U43">3</span>,<span class="mxinfo" id="T3:U44">3</span>)</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,867" id="srcline867">867</a></span><span class="line">    <span class="keyword">case</span> 312</span></span>
<span class="srcline"><span class="lineno"><a href="1,868" id="srcline868">868</a></span><span class="line">        <span class="mxinfo" id="T3:U45"><span class="var type1" id="S763T3U5488">euler1</span> = <span class="mxinfo" id="T3:U47">atan2( <span class="mxinfo" id="T3:U48">-<span class="mxinfo" id="T3:U49"><span class="var type1" id="S759T13U5493">C</span>(<span class="mxinfo" id="T3:U51">2</span>,<span class="mxinfo" id="T3:U52">1</span>)</span></span>,<span class="mxinfo" id="T3:U53"><span class="var type1" id="S759T13U5497">C</span>(<span class="mxinfo" id="T3:U55">2</span>,<span class="mxinfo" id="T3:U56">2</span>)</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,869" id="srcline869">869</a></span><span class="line">        <span class="mxinfo" id="T3:U57"><span class="var type1" id="S764T3U5502">euler2</span> = <span class="mxinfo" id="T3:U59">asin( <span class="mxinfo" id="T3:U60"><span class="var type1" id="S759T13U5506">C</span>(<span class="mxinfo" id="T3:U62">2</span>,<span class="mxinfo" id="T3:U63">3</span>)</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,870" id="srcline870">870</a></span><span class="line">        <span class="comment">% euler2 = atan2( C(2,3),sqrt( C(2,1)^2+C(2,2)^2 ) ) ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,871" id="srcline871">871</a></span><span class="line">        <span class="mxinfo" id="T3:U64"><span class="var type1" id="S765T3U5511">euler3</span> = <span class="mxinfo" id="T3:U66">atan2( <span class="mxinfo" id="T3:U67">-<span class="mxinfo" id="T3:U68"><span class="var type1" id="S759T13U5516">C</span>(<span class="mxinfo" id="T3:U70">1</span>,<span class="mxinfo" id="T3:U71">3</span>)</span></span>,<span class="mxinfo" id="T3:U72"><span class="var type1" id="S759T13U5520">C</span>(<span class="mxinfo" id="T3:U74">3</span>,<span class="mxinfo" id="T3:U75">3</span>)</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,872" id="srcline872">872</a></span><span class="line">    <span class="keyword">case</span> 123</span></span>
<span class="srcline"><span class="lineno"><a href="1,873" id="srcline873">873</a></span><span class="line">        <span class="mxinfo" id="T3:U76"><span class="var type1" id="S763T3U5527">euler1</span> = <span class="mxinfo" id="T3:U78">atan2( <span class="mxinfo" id="T3:U79">-<span class="mxinfo" id="T3:U80"><span class="var type1" id="S759T13U5532">C</span>(<span class="mxinfo" id="T3:U82">3</span>,<span class="mxinfo" id="T3:U83">2</span>)</span></span>,<span class="mxinfo" id="T3:U84"><span class="var type1" id="S759T13U5536">C</span>(<span class="mxinfo" id="T3:U86">3</span>,<span class="mxinfo" id="T3:U87">3</span>)</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,874" id="srcline874">874</a></span><span class="line">        <span class="mxinfo" id="T3:U88"><span class="var type1" id="S764T3U5541">euler2</span> = <span class="mxinfo" id="T3:U90">asin(<span class="mxinfo" id="T3:U91"><span class="var type1" id="S759T13U5545">C</span>(<span class="mxinfo" id="T3:U93">3</span>,<span class="mxinfo" id="T3:U94">1</span>)</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,875" id="srcline875">875</a></span><span class="line">        <span class="mxinfo" id="T3:U95"><span class="var type1" id="S765T3U5550">euler3</span> = <span class="mxinfo" id="T3:U97">atan2( <span class="mxinfo" id="T3:U98">-<span class="mxinfo" id="T3:U99"><span class="var type1" id="S759T13U5555">C</span>(<span class="mxinfo" id="T3:U101">2</span>,<span class="mxinfo" id="T3:U102">1</span>)</span></span>,<span class="mxinfo" id="T3:U103"><span class="var type1" id="S759T13U5559">C</span>(<span class="mxinfo" id="T3:U105">1</span>,<span class="mxinfo" id="T3:U106">1</span>)</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,876" id="srcline876">876</a></span><span class="line">    <span class="keyword">case</span> 132</span></span>
<span class="srcline"><span class="lineno"><a href="1,877" id="srcline877">877</a></span><span class="line">        <span class="mxinfo" id="T3:U107"><span class="var type1" id="S763T3U5566">euler1</span> =  <span class="mxinfo" id="T3:U109">atan2(<span class="mxinfo" id="T3:U110"><span class="var type1" id="S759T13U5570">C</span>(<span class="mxinfo" id="T3:U112">2</span>,<span class="mxinfo" id="T3:U113">3</span>)</span>,<span class="mxinfo" id="T3:U114"><span class="var type1" id="S759T13U5574">C</span>(<span class="mxinfo" id="T3:U116">2</span>,<span class="mxinfo" id="T3:U117">2</span>)</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,878" id="srcline878">878</a></span><span class="line">        <span class="mxinfo" id="T3:U118"><span class="var type1" id="S764T3U5579">euler2</span> =  <span class="mxinfo" id="T3:U120">asin(<span class="mxinfo" id="T3:U121">-<span class="mxinfo" id="T3:U122"><span class="var type1" id="S759T13U5584">C</span>(<span class="mxinfo" id="T3:U124">2</span>,<span class="mxinfo" id="T3:U125">1</span>)</span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,879" id="srcline879">879</a></span><span class="line">        <span class="mxinfo" id="T3:U126"><span class="var type1" id="S765T3U5589">euler3</span> =  <span class="mxinfo" id="T3:U128">atan2(<span class="mxinfo" id="T3:U129"><span class="var type1" id="S759T13U5593">C</span>(<span class="mxinfo" id="T3:U131">3</span>,<span class="mxinfo" id="T3:U132">1</span>)</span>,<span class="mxinfo" id="T3:U133"><span class="var type1" id="S759T13U5597">C</span>(<span class="mxinfo" id="T3:U135">1</span>,<span class="mxinfo" id="T3:U136">1</span>)</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,880" id="srcline880">880</a></span><span class="line">    <span class="keyword">case</span> 213</span></span>
<span class="srcline"><span class="lineno"><a href="1,881" id="srcline881">881</a></span><span class="line">        <span class="mxinfo" id="T3:U137"><span class="var type1" id="S763T3U5604">euler1</span> = <span class="mxinfo" id="T3:U139">atan2( <span class="mxinfo" id="T3:U140"><span class="var type1" id="S759T13U5608">C</span>(<span class="mxinfo" id="T3:U142">3</span>,<span class="mxinfo" id="T3:U143">1</span>)</span>,<span class="mxinfo" id="T3:U144"><span class="var type1" id="S759T13U5612">C</span>(<span class="mxinfo" id="T3:U146">3</span>,<span class="mxinfo" id="T3:U147">3</span>)</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,882" id="srcline882">882</a></span><span class="line">        <span class="mxinfo" id="T3:U148"><span class="var type1" id="S764T3U5617">euler2</span> = <span class="mxinfo" id="T3:U150">asin( <span class="mxinfo" id="T3:U151">-<span class="mxinfo" id="T3:U152"><span class="var type1" id="S759T13U5622">C</span>(<span class="mxinfo" id="T3:U154">3</span>,<span class="mxinfo" id="T3:U155">2</span>)</span></span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,883" id="srcline883">883</a></span><span class="line">        <span class="comment">% euler2 = atan2( -C(3,2),sqrt( C(1,2)^2+C(2,2)^2 ) ) ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,884" id="srcline884">884</a></span><span class="line">        <span class="mxinfo" id="T3:U156"><span class="var type1" id="S765T3U5627">euler3</span> = <span class="mxinfo" id="T3:U158">atan2( <span class="mxinfo" id="T3:U159"><span class="var type1" id="S759T13U5631">C</span>(<span class="mxinfo" id="T3:U161">1</span>,<span class="mxinfo" id="T3:U162">2</span>)</span>,<span class="mxinfo" id="T3:U163"><span class="var type1" id="S759T13U5635">C</span>(<span class="mxinfo" id="T3:U165">2</span>,<span class="mxinfo" id="T3:U166">2</span>)</span> )</span></span> ;        </span></span>
<span class="srcline"><span class="lineno"><a href="1,885" id="srcline885">885</a></span><span class="line">    <span class="keyword">case</span> 231 </span></span>
<span class="srcline"><span class="lineno"><a href="1,886" id="srcline886">886</a></span><span class="line">        <span class="mxinfo" id="T3:U167"><span class="var type1" id="S763T3U5642">euler1</span> = <span class="mxinfo" id="T3:U169">atan2(<span class="mxinfo" id="T3:U170">-<span class="mxinfo" id="T3:U171"><span class="var type1" id="S759T13U5647">C</span>(<span class="mxinfo" id="T3:U173">1</span>,<span class="mxinfo" id="T3:U174">3</span>)</span></span>,<span class="mxinfo" id="T3:U175"><span class="var type1" id="S759T13U5651">C</span>(<span class="mxinfo" id="T3:U177">1</span>,<span class="mxinfo" id="T3:U178">1</span>)</span>)</span></span>  ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,887" id="srcline887">887</a></span><span class="line">        <span class="mxinfo" id="T3:U179"><span class="var type1" id="S764T3U5656">euler2</span> = <span class="mxinfo" id="T3:U181">asin(<span class="mxinfo" id="T3:U182"><span class="var type1" id="S759T13U5660">C</span>(<span class="mxinfo" id="T3:U184">1</span>,<span class="mxinfo" id="T3:U185">2</span>)</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,888" id="srcline888">888</a></span><span class="line">        <span class="mxinfo" id="T3:U186"><span class="var type1" id="S765T3U5665">euler3</span> = <span class="mxinfo" id="T3:U188">atan2(<span class="mxinfo" id="T3:U189">-<span class="mxinfo" id="T3:U190"><span class="var type1" id="S759T13U5670">C</span>(<span class="mxinfo" id="T3:U192">3</span>,<span class="mxinfo" id="T3:U193">2</span>)</span></span>,<span class="mxinfo" id="T3:U194"><span class="var type1" id="S759T13U5674">C</span>(<span class="mxinfo" id="T3:U196">2</span>,<span class="mxinfo" id="T3:U197">2</span>)</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,889" id="srcline889">889</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,890" id="srcline890">890</a></span><span class="line"><span class="mxinfo" id="T29:U198"><span class="var type1" id="S758T29U5679">euler</span> = <span class="mxinfo" id="T29:U200">[ <span class="var type1" id="S763T3U5682">euler1</span>; <span class="var type1" id="S764T3U5684">euler2</span>; <span class="var type1" id="S765T3U5686">euler3</span> ]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,891" id="srcline891">891</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,892" id="srcline892">892</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S768T3U5689">i</span>=<span class="mxinfo" id="T3:U205">1</span>:3</span></span>
<span class="srcline"><span class="lineno"><a href="1,893" id="srcline893">893</a></span><span class="line">    <span class="mxinfo" id="T3:U206"><span class="mxinfo" id="T3:U207"><span class="var type1" id="S758T29U5696">euler</span>(<span class="var type1" id="S768T3U5697">i</span>)</span> = <span class="mxinfo" id="T3:U210"><span class="mxinfo" id="T3:U211"><span class="var type1" id="S758T29U5700">euler</span>(<span class="var type1" id="S768T3U5701">i</span>)</span>*<span class="mxinfo" id="T3:U214"><span class="var type1" id="S761T7U5703">rotateDirection</span>(<span class="var type1" id="S768T3U5704">i</span>)</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,894" id="srcline894">894</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,895" id="srcline895">895</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,896" id="srcline896">896</a></span><span class="line"><span class="comment">%% Change Euler Rotate Order</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,897" id="srcline897">897</a></span><span class="line"></span></span>
</pre>
