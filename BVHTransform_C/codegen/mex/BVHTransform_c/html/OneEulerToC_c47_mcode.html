<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,803" id="srcline803">803</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,804" id="srcline804">804</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,805" id="srcline805">805</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S734T13U5170">C</span> =  OneEulerToC_c( <span class="var type1" id="S735T7U5173">euler</span>,<span class="var type1" id="S736T3U5174">rotateOrder</span>,<span class="var type1" id="S737T7U5175">rotateDirection</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,806" id="srcline806">806</a></span><span class="line">coder.inline(<span class="string">'never'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,807" id="srcline807">807</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,808" id="srcline808">808</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S739T3U5184">i</span>=<span class="mxinfo" id="T3:U6">1</span>:3</span></span>
<span class="srcline"><span class="lineno"><a href="1,809" id="srcline809">809</a></span><span class="line">    <span class="mxinfo" id="T3:U7"><span class="mxinfo" id="T3:U8"><span class="var type1" id="S735T7U5191">euler</span>(<span class="var type1" id="S739T3U5192">i</span>)</span> = <span class="mxinfo" id="T3:U11"><span class="mxinfo" id="T3:U12"><span class="var type1" id="S735T7U5195">euler</span>(<span class="var type1" id="S739T3U5196">i</span>)</span>*<span class="mxinfo" id="T3:U15"><span class="var type1" id="S737T7U5198">rotateDirection</span>(<span class="var type1" id="S739T3U5199">i</span>)</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,810" id="srcline810">810</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,811" id="srcline811">811</a></span><span class="line"><span class="mxinfo" id="T13:U18"><span class="var type1" id="S734T13U5202">C</span> = <span class="mxinfo" id="T13:U20">zeros(<span class="mxinfo" id="T3:U21">3</span>,<span class="mxinfo" id="T3:U22">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,812" id="srcline812">812</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,813" id="srcline813">813</a></span><span class="line"><span class="mxinfo" id="T3:U23"><span class="keyword">switch</span> <span class="var type1" id="S736T3U5208">rotateOrder</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,814" id="srcline814">814</a></span><span class="line"><span class="mxinfo" id="T3:U23">    <span class="keyword">case</span> <span class="mxinfo" id="T3:U25">321</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="1,815" id="srcline815">815</a></span><span class="line"><span class="mxinfo" id="T3:U23">        <span class="mxinfo" id="T13:U26"><span class="var type1" id="S734T13U5213">C</span> = <span class="mxinfo" id="T13:U28"><span class="mxinfo" id="T13:U29"><span class="mxinfo" id="T13:U30"><span class="fcn" id="F22N16:B5217">RotateX</span>(<span class="mxinfo" id="T3:U31"><span class="var type1" id="S735T7U5219">euler</span>(<span class="mxinfo" id="T3:U33">3</span>)</span>)</span> * <span class="mxinfo" id="T13:U34"><span class="fcn" id="F46N17:B5222">RotateY</span>(<span class="mxinfo" id="T3:U35"><span class="var type1" id="S735T7U5224">euler</span>(<span class="mxinfo" id="T3:U37">2</span>)</span>)</span></span> * <span class="mxinfo" id="T13:U38"><span class="fcn" id="F23N18:B5227">RotateZ</span>(<span class="mxinfo" id="T3:U39"><span class="var type1" id="S735T7U5229">euler</span>(<span class="mxinfo" id="T3:U41">1</span>)</span>)</span></span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,816" id="srcline816">816</a></span><span class="line"><span class="mxinfo" id="T3:U23">    <span class="keyword">case</span> <span class="mxinfo" id="T3:U42">312</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,817" id="srcline817">817</a></span><span class="line"><span class="mxinfo" id="T3:U23">        <span class="mxinfo" id="T13:U43"><span class="var type1" id="S734T13U5235">C</span> = <span class="mxinfo" id="T13:U45"><span class="mxinfo" id="T13:U46"><span class="mxinfo" id="T13:U47"><span class="fcn" id="F46N17:B5239">RotateY</span>(<span class="mxinfo" id="T3:U48"><span class="var type1" id="S735T7U5241">euler</span>(<span class="mxinfo" id="T3:U50">3</span>)</span>)</span> * <span class="mxinfo" id="T13:U51"><span class="fcn" id="F22N16:B5244">RotateX</span>(<span class="mxinfo" id="T3:U52"><span class="var type1" id="S735T7U5246">euler</span>(<span class="mxinfo" id="T3:U54">2</span>)</span>)</span></span> * <span class="mxinfo" id="T13:U55"><span class="fcn" id="F23N18:B5249">RotateZ</span>(<span class="mxinfo" id="T3:U56"><span class="var type1" id="S735T7U5251">euler</span>(<span class="mxinfo" id="T3:U58">1</span>)</span>)</span></span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,818" id="srcline818">818</a></span><span class="line"><span class="mxinfo" id="T3:U23">    <span class="keyword">case</span> <span class="mxinfo" id="T3:U59">123</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,819" id="srcline819">819</a></span><span class="line"><span class="mxinfo" id="T3:U23">        <span class="mxinfo" id="T13:U60"><span class="var type1" id="S734T13U5257">C</span> = <span class="mxinfo" id="T13:U62"><span class="mxinfo" id="T13:U63"><span class="mxinfo" id="T13:U64"><span class="fcn" id="F23N18:B5261">RotateZ</span>(<span class="mxinfo" id="T3:U65"><span class="var type1" id="S735T7U5263">euler</span>(<span class="mxinfo" id="T3:U67">3</span>)</span>)</span> * <span class="mxinfo" id="T13:U68"><span class="fcn" id="F46N17:B5266">RotateY</span>(<span class="mxinfo" id="T3:U69"><span class="var type1" id="S735T7U5268">euler</span>(<span class="mxinfo" id="T3:U71">2</span>)</span>)</span></span> * <span class="mxinfo" id="T13:U72"><span class="fcn" id="F22N16:B5271">RotateX</span>(<span class="mxinfo" id="T3:U73"><span class="var type1" id="S735T7U5273">euler</span>(<span class="mxinfo" id="T3:U75">1</span>)</span>)</span></span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,820" id="srcline820">820</a></span><span class="line"><span class="mxinfo" id="T3:U23">    <span class="keyword">case</span> <span class="mxinfo" id="T3:U76">132</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,821" id="srcline821">821</a></span><span class="line"><span class="mxinfo" id="T3:U23">        <span class="mxinfo" id="T13:U77"><span class="var type1" id="S734T13U5279">C</span> = <span class="mxinfo" id="T13:U79"><span class="mxinfo" id="T13:U80"><span class="mxinfo" id="T13:U81"><span class="fcn" id="F46N17:B5283">RotateY</span>(<span class="mxinfo" id="T3:U82"><span class="var type1" id="S735T7U5285">euler</span>(<span class="mxinfo" id="T3:U84">3</span>)</span>)</span> * <span class="mxinfo" id="T13:U85"><span class="fcn" id="F23N18:B5288">RotateZ</span>(<span class="mxinfo" id="T3:U86"><span class="var type1" id="S735T7U5290">euler</span>(<span class="mxinfo" id="T3:U88">2</span>)</span>)</span></span> * <span class="mxinfo" id="T13:U89"><span class="fcn" id="F22N16:B5293">RotateX</span>(<span class="mxinfo" id="T3:U90"><span class="var type1" id="S735T7U5295">euler</span>(<span class="mxinfo" id="T3:U92">1</span>)</span>)</span></span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,822" id="srcline822">822</a></span><span class="line"><span class="mxinfo" id="T3:U23">    <span class="keyword">case</span> <span class="mxinfo" id="T3:U93">213</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,823" id="srcline823">823</a></span><span class="line"><span class="mxinfo" id="T3:U23">        <span class="mxinfo" id="T13:U94"><span class="var type1" id="S734T13U5301">C</span> = <span class="mxinfo" id="T13:U96"><span class="mxinfo" id="T13:U97"><span class="mxinfo" id="T13:U98"><span class="fcn" id="F23N18:B5305">RotateZ</span>(<span class="mxinfo" id="T3:U99"><span class="var type1" id="S735T7U5307">euler</span>(<span class="mxinfo" id="T3:U101">3</span>)</span>)</span> * <span class="mxinfo" id="T13:U102"><span class="fcn" id="F22N16:B5310">RotateX</span>(<span class="mxinfo" id="T3:U103"><span class="var type1" id="S735T7U5312">euler</span>(<span class="mxinfo" id="T3:U105">2</span>)</span>)</span></span> * <span class="mxinfo" id="T13:U106"><span class="fcn" id="F46N17:B5315">RotateY</span>(<span class="mxinfo" id="T3:U107"><span class="var type1" id="S735T7U5317">euler</span>(<span class="mxinfo" id="T3:U109">1</span>)</span>)</span></span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,824" id="srcline824">824</a></span><span class="line"><span class="mxinfo" id="T3:U23">    <span class="keyword">case</span> <span class="string">'YZX'</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,825" id="srcline825">825</a></span><span class="line"><span class="mxinfo" id="T3:U23">        <span class="mxinfo" id="T13:U110"><span class="var type1" id="S734T13U5323">C</span> = <span class="mxinfo" id="T13:U112"><span class="mxinfo" id="T13:U113"><span class="mxinfo" id="T13:U114"><span class="fcn" id="F22N16:B5327">RotateX</span>(<span class="mxinfo" id="T3:U115"><span class="var type1" id="S735T7U5329">euler</span>(<span class="mxinfo" id="T3:U117">3</span>)</span>)</span> * <span class="mxinfo" id="T13:U118"><span class="fcn" id="F23N18:B5332">RotateZ</span>(<span class="mxinfo" id="T3:U119"><span class="var type1" id="S735T7U5334">euler</span>(<span class="mxinfo" id="T3:U121">2</span>)</span>)</span></span> * <span class="mxinfo" id="T13:U122"><span class="fcn" id="F46N17:B5337">RotateY</span>(<span class="mxinfo" id="T3:U123"><span class="var type1" id="S735T7U5339">euler</span>(<span class="mxinfo" id="T3:U125">1</span>)</span>)</span></span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,826" id="srcline826">826</a></span><span class="line"><span class="mxinfo" id="T3:U23"><span class="keyword"><span class="keyword">end</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,827" id="srcline827">827</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,828" id="srcline828">828</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,829" id="srcline829">829</a></span><span class="line"><span class="comment">%% xyz  2015.4.5</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,830" id="srcline830">830</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,831" id="srcline831">831</a></span><span class="line"><span class="comment">% direction cosine matrix  to Euler angle  for multi C</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,832" id="srcline832">832</a></span><span class="line"><span class="comment">% C: [N*3*3]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,833" id="srcline833">833</a></span><span class="line"><span class="comment">%       euler = [eu_x,eu_y,eu_z]  ( Nframes*3 )</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,834" id="srcline834">834</a></span><span class="line"><span class="comment">% store order of euler angle: the rotate order</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,835" id="srcline835">835</a></span><span class="line"><span class="comment">% positive:anticlockwise rotate </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,836" id="srcline836">836</a></span><span class="line"><span class="comment">% the first and third euler angles scope: [-pi,pi]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,837" id="srcline837">837</a></span><span class="line"><span class="comment">% the second euler angles scope: [-pi/2,pi/2]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,838" id="srcline838">838</a></span><span class="line"><span class="comment">% unit:rad </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,839" id="srcline839">839</a></span><span class="line"><span class="comment">% rotateDirection: anticlockwise(1) or clockwise(-1)  111</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,840" id="srcline840">840</a></span><span class="line"></span></span>
</pre>
