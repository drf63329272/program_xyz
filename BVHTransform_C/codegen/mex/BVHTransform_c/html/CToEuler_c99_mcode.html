<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,827" id="srcline827">827</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,828" id="srcline828">828</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,829" id="srcline829">829</a></span><span class="line"><span class="comment">%% xyz  2015.4.5</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,830" id="srcline830">830</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,831" id="srcline831">831</a></span><span class="line"><span class="comment">% direction cosine matrix  to Euler angle  for multi C</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,832" id="srcline832">832</a></span><span class="line"><span class="comment">% C: [N*3*3]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,833" id="srcline833">833</a></span><span class="line"><span class="comment">%       euler = [eu_x,eu_y,eu_z]  ( Nframes*3 )</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,834" id="srcline834">834</a></span><span class="line"><span class="comment">% store order of euler angle: the rotate order</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,835" id="srcline835">835</a></span><span class="line"><span class="comment">% positive:anticlockwise rotate </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,836" id="srcline836">836</a></span><span class="line"><span class="comment">% the first and third euler angles scope: [-pi,pi]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,837" id="srcline837">837</a></span><span class="line"><span class="comment">% the second euler angles scope: [-pi/2,pi/2]</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,838" id="srcline838">838</a></span><span class="line"><span class="comment">% unit:rad </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,839" id="srcline839">839</a></span><span class="line"><span class="comment">% rotateDirection: anticlockwise(1) or clockwise(-1)  111</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,840" id="srcline840">840</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,841" id="srcline841">841</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S745T7U5343">euler</span> = CToEuler_c( <span class="var type1" id="S746T20U5346">C</span>,<span class="var type1" id="S747T3U5347">rotateOrder</span>,<span class="var type1" id="S748T7U5348">rotateDirection</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,842" id="srcline842">842</a></span><span class="line">coder.inline(<span class="string">'never'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,843" id="srcline843">843</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,844" id="srcline844">844</a></span><span class="line"><span class="keyword">if</span> size(<span class="var type1" id="S746T20U5360">C</span>,3) == 1</span></span>
<span class="srcline"><span class="lineno"><a href="1,845" id="srcline845">845</a></span><span class="line">    <span class="var type0" id="S745T0U5365">euler</span> = OneCToEuler_c( <span class="var type0" id="S746T0U5368">C</span>,<span class="var type0" id="S747T0U5369">rotateOrder</span>,<span class="var type0" id="S748T0U5370">rotateDirection</span> );</span></span>
<span class="srcline"><span class="lineno"><a href="1,846" id="srcline846">846</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,847" id="srcline847">847</a></span><span class="line">    <span class="mxinfo" id="T3:U6"><span class="var type1" id="S752T3U5374">Nframes</span> = <span class="mxinfo" id="T3:U8">size( <span class="var type1" id="S746T20U5377">C</span>,1 )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,848" id="srcline848">848</a></span><span class="line">    <span class="mxinfo" id="T7:U10"><span class="var type1" id="S745T7U5381">euler</span> = <span class="mxinfo" id="T7:U12">zeros( <span class="mxinfo" id="T3:U13"><span class="var type1" id="S752T3U5384">Nframes</span></span>,<span class="mxinfo" id="T3:U15">3</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,849" id="srcline849">849</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S754T3U5388">k</span>=<span class="mxinfo" id="T3:U17">1:<span class="var type1" id="S752T3U5391">Nframes</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,850" id="srcline850">850</a></span><span class="line">        <span class="mxinfo" id="T13:U19"><span class="var type1" id="S755T13U5394">C_K</span> = <span class="mxinfo" id="T13:U21">permute( <span class="mxinfo" id="T20:U22"><span class="var type1" id="S746T20U5398">C</span>(<span class="mxinfo" id="T3:U24"><span class="var type1" id="S754T3U5399">k</span></span>,:,:)</span>,[2,3,1] )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,851" id="srcline851">851</a></span><span class="line">        <span class="mxinfo" id="T7:U26"><span class="mxinfo" id="T7:U27"><span class="var type1" id="S745T7U5410">euler</span>(<span class="mxinfo" id="T3:U29"><span class="var type1" id="S754T3U5411">k</span></span>,:)</span> = <span class="mxinfo" id="T29:U31"><span class="fcn" id="F98N14:B5414">OneCToEuler_c</span>( <span class="var type1" id="S755T13U5415">C_K</span>,<span class="var type1" id="S747T3U5416">rotateOrder</span>,<span class="var type1" id="S748T7U5417">rotateDirection</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,852" id="srcline852">852</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,853" id="srcline853">853</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,854" id="srcline854">854</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,855" id="srcline855">855</a></span><span class="line"></span></span>
</pre>
