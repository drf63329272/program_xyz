<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,465" id="srcline465">465</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,466" id="srcline466">466</a></span><span class="line"><span class="comment">%% LHand</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,467" id="srcline467">467</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S461T3U2357">LWristYaw</span>,<span class="var type1" id="S462T7U2358">LeftHand_new</span> ] = TransformLHand( <span class="var type1" id="S463T20U2361">C_Spine_LHand</span>,<span class="var type1" id="S464T20U2362">C_Spine_LForeArmNew</span>,<span class="var type1" id="S465T3U2363">rotateOrder_BVH</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,468" id="srcline468">468</a></span><span class="line">coder.inline(<span class="string">'never'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,469" id="srcline469">469</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,470" id="srcline470">470</a></span><span class="line"><span class="mxinfo" id="T7:U6"><span class="var type1" id="S467T7U2372">rotateDirection_BVH</span> = <span class="mxinfo" id="T7:U8">[1,1,1]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,471" id="srcline471">471</a></span><span class="line"><span class="mxinfo" id="T20:U9"><span class="var type1" id="S468T20U2380">C_LForeArmNew_Spine</span> = <span class="mxinfo" id="T20:U11"><span class="fcn" id="F81N13:B2382">InverseC_Multi</span>( <span class="var type1" id="S464T20U2383">C_Spine_LForeArmNew</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,472" id="srcline472">472</a></span><span class="line"><span class="mxinfo" id="T20:U13"><span class="var type1" id="S470T20U2386">C_LForeArmNew_LHand</span> = <span class="mxinfo" id="T20:U15"><span class="fcn" id="F78N5:B2388">CalculateC_Multi</span>( <span class="var type1" id="S468T20U2389">C_LForeArmNew_Spine</span>,<span class="var type1" id="S463T20U2390">C_Spine_LHand</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,473" id="srcline473">473</a></span><span class="line"><span class="mxinfo" id="T7:U18"><span class="var type1" id="S472T7U2393">E_LForeArmNew_LHand</span> = <span class="mxinfo" id="T7:U20"><span class="fcn" id="F99N4:B2395">CToEuler_c</span>( <span class="var type1" id="S470T20U2396">C_LForeArmNew_LHand</span>,<span class="mxinfo" id="T3:U22">123</span> ,<span class="mxinfo" id="T7:U23"><span class="var type1" id="S467T7U2398">rotateDirection_BVH</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,474" id="srcline474">474</a></span><span class="line"><span class="mxinfo" id="T3:U25"><span class="var type1" id="S461T3U2401">LWristYaw</span> = <span class="mxinfo" id="T3:U27"><span class="var type1" id="S472T7U2404">E_LForeArmNew_LHand</span>(:,<span class="mxinfo" id="T3:U29">1</span>)</span>'</span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,475" id="srcline475">475</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,476" id="srcline476">476</a></span><span class="line"><span class="comment">%%% get new BVH</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,477" id="srcline477">477</a></span><span class="line"><span class="mxinfo" id="T7:U30"><span class="var type1" id="S474T7U2409">LHand_Nao</span> = <span class="mxinfo" id="T7:U32">zeros( size(<span class="var type1" id="S472T7U2414">E_LForeArmNew_LHand</span>) )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,478" id="srcline478">478</a></span><span class="line"><span class="mxinfo" id="T3:U34"><span class="mxinfo" id="T3:U35"><span class="var type1" id="S474T7U2418">LHand_Nao</span>(:,<span class="mxinfo" id="T3:U37">1</span>)</span> = <span class="mxinfo" id="T3:U38"><span class="var type1" id="S472T7U2422">E_LForeArmNew_LHand</span>(:,<span class="mxinfo" id="T3:U40">1</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,479" id="srcline479">479</a></span><span class="line"><span class="mxinfo" id="T3:U41"><span class="var type1" id="S477T3U2427">Nframes</span> = <span class="mxinfo" id="T3:U43">size(<span class="var type1" id="S463T20U2430">C_Spine_LHand</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,480" id="srcline480">480</a></span><span class="line"><span class="mxinfo" id="T3:U45"><span class="var type1" id="S478T3U2434">LHand_rotateOrder</span> = <span class="mxinfo" id="T3:U47">123</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,481" id="srcline481">481</a></span><span class="line"><span class="mxinfo" id="T7:U48"><span class="var type1" id="S462T7U2438">LeftHand_new</span> = <span class="mxinfo" id="T7:U50">zeros(<span class="mxinfo" id="T3:U51"><span class="var type1" id="S477T3U2441">Nframes</span></span>,<span class="mxinfo" id="T3:U53">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,482" id="srcline482">482</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S479T3U2445">k</span>=<span class="mxinfo" id="T3:U55">1:<span class="var type1" id="S477T3U2448">Nframes</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,483" id="srcline483">483</a></span><span class="line">    <span class="mxinfo" id="T7:U57"><span class="mxinfo" id="T7:U58"><span class="var type1" id="S462T7U2452">LeftHand_new</span>(<span class="mxinfo" id="T3:U60"><span class="var type1" id="S479T3U2453">k</span></span>,:)</span> = <span class="mxinfo" id="T7:U62"><span class="fcn" id="F167N10:B2456">ChangeEulerRotate_c</span>(  <span class="mxinfo" id="T7:U63"><span class="var type1" id="S474T7U2458">LHand_Nao</span>( <span class="mxinfo" id="T3:U65"><span class="var type1" id="S479T3U2459">k</span></span>,: )</span>,<span class="mxinfo" id="T3:U67"><span class="var type1" id="S478T3U2461">LHand_rotateOrder</span></span>,<span class="var type1" id="S465T3U2462">rotateOrder_BVH</span> ,<span class="mxinfo" id="T7:U70">[1,1,1]</span>,<span class="mxinfo" id="T7:U71">[1,1,1]</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,484" id="srcline484">484</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,485" id="srcline485">485</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,486" id="srcline486">486</a></span><span class="line"><span class="comment">%% RUpLeg</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,487" id="srcline487">487</a></span><span class="line"><span class="comment">% HipYawPitch：左右大腿的 HipYawPitch Angle  [ 1*Nframes ]</span></span></span>
</pre>
