<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,444" id="srcline444">444</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,445" id="srcline445">445</a></span><span class="line"><span class="comment">%% RHand</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,446" id="srcline446">446</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S439T3U2232">RWristYaw</span>,<span class="var type1" id="S440T7U2233">RightHand_new</span> ] = TransformRHand( <span class="var type1" id="S441T18U2236">C_Spine_RHand</span>,<span class="var type1" id="S442T18U2237">C_Spine_RForeArmNew</span>,<span class="var type1" id="S443T3U2238">rotateOrder_BVH</span> ) </span></span>
<span class="srcline"><span class="lineno"><a href="1,447" id="srcline447">447</a></span><span class="line">coder.inline(<span class="string">'never'</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,448" id="srcline448">448</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,449" id="srcline449">449</a></span><span class="line"><span class="mxinfo" id="T18:U6"><span class="var type1" id="S445T18U2247">C_RForeArmNew_Spine</span> = <span class="mxinfo" id="T18:U8"><span class="fcn" id="F78N13:B2249">InverseC_Multi</span>( <span class="var type1" id="S442T18U2250">C_Spine_RForeArmNew</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,450" id="srcline450">450</a></span><span class="line"><span class="mxinfo" id="T18:U10"><span class="var type1" id="S447T18U2253">C_RForeArmNew_RHand</span> = <span class="mxinfo" id="T18:U12"><span class="fcn" id="F75N5:B2255">CalculateC_Multi</span>( <span class="var type1" id="S445T18U2256">C_RForeArmNew_Spine</span>,<span class="var type1" id="S441T18U2257">C_Spine_RHand</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,451" id="srcline451">451</a></span><span class="line"><span class="mxinfo" id="T7:U15"><span class="var type1" id="S449T7U2260">E_RForeArmNew_RHand</span> = <span class="mxinfo" id="T7:U17"><span class="fcn" id="F96N4:B2262">CToEuler_c</span>( <span class="var type1" id="S447T18U2263">C_RForeArmNew_RHand</span>,<span class="mxinfo" id="T3:U19">123</span>,<span class="mxinfo" id="T7:U20">[-1,1,1]</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,452" id="srcline452">452</a></span><span class="line"><span class="mxinfo" id="T3:U21"><span class="var type1" id="S439T3U2273">RWristYaw</span> = <span class="mxinfo" id="T3:U23"><span class="var type1" id="S449T7U2276">E_RForeArmNew_RHand</span>(:,<span class="mxinfo" id="T3:U25">1</span>)</span>'</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,453" id="srcline453">453</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,454" id="srcline454">454</a></span><span class="line"><span class="comment">%%% get new BVH</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,455" id="srcline455">455</a></span><span class="line"><span class="mxinfo" id="T7:U26"><span class="var type1" id="S451T7U2281">RHand_Nao</span> = <span class="mxinfo" id="T7:U28">zeros( size(<span class="var type1" id="S449T7U2286">E_RForeArmNew_RHand</span>) )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,456" id="srcline456">456</a></span><span class="line"><span class="mxinfo" id="T3:U30"><span class="mxinfo" id="T3:U31"><span class="var type1" id="S451T7U2290">RHand_Nao</span>(:,<span class="mxinfo" id="T3:U33">1</span>)</span> = <span class="mxinfo" id="T3:U34"><span class="var type1" id="S449T7U2294">E_RForeArmNew_RHand</span>(:,<span class="mxinfo" id="T3:U36">1</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,457" id="srcline457">457</a></span><span class="line"><span class="mxinfo" id="T3:U37"><span class="var type1" id="S454T3U2299">Nframes</span> = <span class="mxinfo" id="T3:U39">size(<span class="var type1" id="S441T18U2302">C_Spine_RHand</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,458" id="srcline458">458</a></span><span class="line"><span class="mxinfo" id="T3:U41"><span class="var type1" id="S455T3U2306">RHand_rotateOrder</span> = <span class="mxinfo" id="T3:U43">123</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,459" id="srcline459">459</a></span><span class="line"><span class="mxinfo" id="T7:U44"><span class="var type1" id="S456T7U2310">RHand_rotateDirection</span> = <span class="mxinfo" id="T7:U46">[-1,1,1]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,460" id="srcline460">460</a></span><span class="line"><span class="mxinfo" id="T7:U47"><span class="var type1" id="S457T7U2319">rotateDirection_BVH</span> = <span class="mxinfo" id="T7:U49">[1,1,1]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,461" id="srcline461">461</a></span><span class="line"><span class="mxinfo" id="T7:U50"><span class="var type1" id="S440T7U2327">RightHand_new</span> = <span class="mxinfo" id="T7:U52">zeros(<span class="mxinfo" id="T3:U53"><span class="var type1" id="S454T3U2330">Nframes</span></span>,<span class="mxinfo" id="T3:U55">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,462" id="srcline462">462</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S458T3U2334">k</span>=<span class="mxinfo" id="T3:U57">1:<span class="var type1" id="S454T3U2337">Nframes</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,463" id="srcline463">463</a></span><span class="line">    <span class="mxinfo" id="T7:U59"><span class="mxinfo" id="T7:U60"><span class="var type1" id="S440T7U2341">RightHand_new</span>(<span class="mxinfo" id="T3:U62"><span class="var type1" id="S458T3U2342">k</span></span>,:)</span> = <span class="mxinfo" id="T7:U64"><span class="fcn" id="F164N10:B2345">ChangeEulerRotate_c</span>(  <span class="mxinfo" id="T7:U65"><span class="var type1" id="S451T7U2347">RHand_Nao</span>( <span class="mxinfo" id="T3:U67"><span class="var type1" id="S458T3U2348">k</span></span>,: )</span>,<span class="mxinfo" id="T3:U69"><span class="var type1" id="S455T3U2350">RHand_rotateOrder</span></span>,<span class="var type1" id="S443T3U2351">rotateOrder_BVH</span>,<span class="mxinfo" id="T7:U72"><span class="var type1" id="S456T7U2352">RHand_rotateDirection</span></span>,<span class="mxinfo" id="T7:U74"><span class="var type1" id="S457T7U2353">rotateDirection_BVH</span></span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,464" id="srcline464">464</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,465" id="srcline465">465</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,466" id="srcline466">466</a></span><span class="line"><span class="comment">%% LHand</span></span></span>
</pre>
