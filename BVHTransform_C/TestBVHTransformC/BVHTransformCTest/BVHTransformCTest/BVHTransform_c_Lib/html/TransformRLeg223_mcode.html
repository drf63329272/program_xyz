<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,481" id="srcline481">481</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,482" id="srcline482">482</a></span><span class="line"><span class="comment">%% RLeg</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,483" id="srcline483">483</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S531T2U2682">RKneePitch</span>,<span class="var type1" id="S532T8U2683">RightLeg_New</span> ] = TransformRLeg( <span class="var type1" id="S533T17U2686">C_Hip_RUpLegNew</span>,<span class="var type1" id="S534T17U2687">C_Hip_RLeg</span>,<span class="mxinfo" id="T7:U5"><span class="var type2" id="S535T7V1U2688">rotateOrder_BVH</span></span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,484" id="srcline484">484</a></span><span class="line"><span class="mxinfo" id="T17:U7"><span class="var type1" id="S536T17U2691">C_RUpLegNew_Hip</span> = <span class="mxinfo" id="T17:U9"><span class="fcn" id="F76N9:B2693">InverseC_Multi</span>( <span class="var type1" id="S533T17U2694">C_Hip_RUpLegNew</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,485" id="srcline485">485</a></span><span class="line"><span class="mxinfo" id="T17:U11"><span class="var type1" id="S538T17U2697">C_RUpLegNew_RLeg</span> = <span class="mxinfo" id="T17:U13"><span class="fcn" id="F73N4:B2699">CalculateC_Multi</span>( <span class="var type1" id="S536T17U2700">C_RUpLegNew_Hip</span>,<span class="var type1" id="S534T17U2701">C_Hip_RLeg</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,486" id="srcline486">486</a></span><span class="line"><span class="mxinfo" id="T8:U16"><span class="var type1" id="S540T8U2704">rotateDirection_BVH</span> = <span class="mxinfo" id="T8:U18">[1,1,1]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,487" id="srcline487">487</a></span><span class="line"><span class="mxinfo" id="T8:U19"><span class="var type1" id="S541T8U2712">E_LUpLegNew_LLeg</span> = <span class="mxinfo" id="T8:U21"><span class="fcn" id="F178N23:B2714">CToEuler_c</span>( <span class="var type1" id="S538T17U2715">C_RUpLegNew_RLeg</span>,<span class="string">'XYZ'</span>,<span class="mxinfo" id="T8:U23"><span class="var type1" id="S540T8U2717">rotateDirection_BVH</span></span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,488" id="srcline488">488</a></span><span class="line"><span class="mxinfo" id="T2:U25"><span class="var type1" id="S531T2U2720">RKneePitch</span> = <span class="mxinfo" id="T2:U27"><span class="var type1" id="S541T8U2723">E_LUpLegNew_LLeg</span>(:,<span class="mxinfo" id="T2:U29">1</span>)</span>'</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,489" id="srcline489">489</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,490" id="srcline490">490</a></span><span class="line"><span class="comment">% E_UpLeg_Leg = CToEuler_c( C_RUpLeg_RLeg,'XYZ' );</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,491" id="srcline491">491</a></span><span class="line"><span class="comment">% RKneePitch = E_UpLeg_Leg(:,1)';</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,492" id="srcline492">492</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,493" id="srcline493">493</a></span><span class="line"><span class="comment">%%% get new BVH</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,494" id="srcline494">494</a></span><span class="line"><span class="mxinfo" id="T8:U30"><span class="var type1" id="S543T8U2728">E_LUpLegNew_LLegNew</span> = <span class="var type1" id="S541T8U2729">E_LUpLegNew_LLeg</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,495" id="srcline495">495</a></span><span class="line"><span class="mxinfo" id="T23:U33"><span class="mxinfo" id="T23:U34"><span class="var type1" id="S543T8U2733">E_LUpLegNew_LLegNew</span>(:,2:3)</span> = <span class="mxinfo" id="T2:U36">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,496" id="srcline496">496</a></span><span class="line"><span class="mxinfo" id="T17:U37"><span class="var type1" id="S544T17U2741">C_LUpLegNew_LLegNew</span> = <span class="mxinfo" id="T17:U39"><span class="fcn" id="F173N26:B2743">EulerToC_c</span>( <span class="var type1" id="S543T8U2744">E_LUpLegNew_LLegNew</span>,<span class="string">'XYZ'</span>,<span class="mxinfo" id="T8:U41">[1,1,1]</span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,497" id="srcline497">497</a></span><span class="line"><span class="mxinfo" id="T8:U42"><span class="var type1" id="S532T8U2753">RightLeg_New</span> = <span class="mxinfo" id="T8:U44"><span class="fcn" id="F118N23:B2755">CToEuler_c</span>( <span class="var type1" id="S544T17U2756">C_LUpLegNew_LLegNew</span>,<span class="var type1" id="S535T7U2757">rotateOrder_BVH</span>,<span class="mxinfo" id="T8:U47"><span class="var type1" id="S540T8U2758">rotateDirection_BVH</span></span> )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,498" id="srcline498">498</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,499" id="srcline499">499</a></span><span class="line"><span class="comment">%% LLeg</span></span></span>
</pre>
