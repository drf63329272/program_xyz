<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="86,1" id="srcline1"> 1</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="86,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%% 阈值参数设置</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,3" id="srcline3"> 3</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T72U3">makerTrackThreshold</span>,<span class="var type1" id="S3T73U4">INSVNSCalibSet</span> ] = SetConstParameters( <span class="var type1" id="S4T1U7">visionFre</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="86,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="86,5" id="srcline5"> 5</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="86,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo" id="T2:U4"><span class="var type1" id="S5T2U10">moveTime</span> = <span class="mxinfo" id="T2:U6">2</span></span> ;          <span class="comment">% sec 轨迹连续判断时间步长</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo" id="T2:U7"><span class="var type1" id="S6T2U14">moveDistance</span> = <span class="mxinfo" id="T2:U9">0.5</span></span> ;      <span class="comment">% m   轨迹连续判断位移步长  （经验值建议0.4m-0.7m）</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo" id="T2:U10"><span class="var type1" id="S7T2U18">MaxMoveSpeed</span> = <span class="mxinfo" id="T2:U12">6</span></span> ; <span class="comment">% m/s  马克点运动允许的最大速度，超过这个速度则认为不连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo" id="T2:U13"><span class="mxinfo" id="T2:U14"><span class="var type1" id="S2T72U23">makerTrackThreshold</span>.moveTime</span> = <span class="var type1" id="S5T2U25">moveTime</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="86,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo" id="T2:U17"><span class="mxinfo" id="T2:U18"><span class="var type1" id="S2T72U29">makerTrackThreshold</span>.MaxMoveTime</span> = <span class="mxinfo" id="T2:U20">3</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="86,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo" id="T2:U21"><span class="mxinfo" id="T2:U22"><span class="var type1" id="S2T72U35">makerTrackThreshold</span>.moveDistance</span> = <span class="var type1" id="S6T2U37">moveDistance</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="86,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo" id="T1:U25"><span class="mxinfo" id="T1:U26"><span class="var type1" id="S2T72U41">makerTrackThreshold</span>.MaxContinuesDisplacement</span> = <span class="mxinfo" id="T1:U28">min( <span class="mxinfo" id="T1:U29"><span class="mxinfo" id="T1:U30"><span class="mxinfo" id="T2:U31">1</span>/<span class="var type1" id="S4T1U48">visionFre</span></span>*<span class="var type1" id="S7T2U49">MaxMoveSpeed</span></span>,<span class="mxinfo" id="T2:U34">0.1</span>)</span></span> ; <span class="comment">% 马克点连续判断最大位移模</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo" id="T2:U35"><span class="mxinfo" id="T2:U36"><span class="var type1" id="S2T72U54">makerTrackThreshold</span>.PositionErrorBear_dT</span> = <span class="mxinfo" id="T2:U38"><span class="mxinfo" id="T2:U39">0.05</span>*<span class="mxinfo" id="T2:U40"><span class="var type1" id="S5T2U58">moveTime</span></span></span></span>;   <span class="comment">% 固定时间的最大运动距离误差（第一步）：位移差在这个范围内的，直接判定&lt;校验1&gt;通过</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo" id="T2:U42"><span class="mxinfo" id="T2:U43"><span class="var type1" id="S2T72U62">makerTrackThreshold</span>.ContinuesTrackedMagnifyRate</span> = <span class="mxinfo" id="T2:U45">1.3</span></span> ;      <span class="comment">% 当连续于跟踪成功的点时，放大PositionErrorBear_dT</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo" id="T2:U46"><span class="var type1" id="S9T2U67">MaxStaticSpeed</span> = <span class="mxinfo" id="T2:U48">0.1</span></span> ; <span class="comment">% m/s 静止时，允许惯性最大测量误差</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo" id="T2:U49"><span class="mxinfo" id="T2:U50"><span class="var type1" id="S2T72U72">makerTrackThreshold</span>.MaxStaticDisp_dT</span> = <span class="mxinfo" id="T2:U52">max(<span class="mxinfo" id="T2:U53"><span class="var type1" id="S9T2U77">MaxStaticSpeed</span>*<span class="var type1" id="S5T2U78">moveTime</span></span>,<span class="mxinfo" id="T2:U56">0.02</span>)</span></span> ;           <span class="comment">% 固定时间的最大运动距离误差（第二步）：（第一步不通过后）位移差的长度是惯性位移长度的MaxPositionError_dT倍以内</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo" id="T2:U57"><span class="mxinfo" id="T2:U58"><span class="var type1" id="S2T72U83">makerTrackThreshold</span>.MaxPositionError_dS</span> = <span class="mxinfo" id="T2:U60"><span class="mxinfo" id="T2:U61"><span class="var type1" id="S6T2U86">moveDistance</span></span>*<span class="mxinfo" id="T2:U63">0.7</span></span></span>;     <span class="comment">% 运动固定距离位移的最大运动距离误差：运动距离的50% （主要是依赖角度约束）</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo" id="T2:U64"><span class="mxinfo" id="T2:U65"><span class="var type1" id="S2T72U91">makerTrackThreshold</span>.Max_dPAngle_dS</span> = <span class="mxinfo" id="T2:U67"><span class="mxinfo" id="T2:U68">20*pi</span>/<span class="mxinfo" id="T2:U69">180</span></span></span> ;      <span class="comment">% 运动固定距离位移的最大位移方向角度差</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,19" id="srcline19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="86,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo" id="T2:U70"><span class="mxinfo" id="T2:U71"><span class="var type1" id="S2T72U102">makerTrackThreshold</span>.MaxMarkHighChange</span> = <span class="mxinfo" id="T2:U73">0.4</span></span> ;      <span class="comment">% m 惯性与视觉目标马克点高度差变化最大范围，用于剔除高度相差较大的点</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,21" id="srcline21">21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="86,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo" id="T53:U74"><span class="mxinfo" id="T53:U75"><span class="var type1" id="S2T72U108">makerTrackThreshold</span>.MaxHighMoveErrRate</span> = <span class="mxinfo" id="T53:U77">[ <span class="mxinfo" id="T2:U78">-<span class="mxinfo" id="T2:U79">0.3</span></span>  <span class="mxinfo" id="T2:U80">0.5</span> ]</span></span> ;  <span class="comment">%  高度方向变化大时，若变化比例小于这个值，直接认定跟踪OK</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,23" id="srcline23">23</a></span><span class="line">        <span class="comment">% 发现高度方向的误差非常</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,24" id="srcline24">24</a></span><span class="line"><span class="mxinfo" id="T2:U81"><span class="mxinfo" id="T2:U82"><span class="var type1" id="S2T72U118">makerTrackThreshold</span>.BigHighMove</span> = <span class="mxinfo" id="T2:U84">0.18</span></span> ;         <span class="comment">% m 大于这个值则认为高度方向变化大</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,25" id="srcline25">25</a></span><span class="line"><span class="comment">%% 坐标系标定参数</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,26" id="srcline26">26</a></span><span class="line"><span class="mxinfo" id="T2:U85"><span class="mxinfo" id="T2:U86"><span class="var type1" id="S3T73U124">INSVNSCalibSet</span>.Min_xyNorm_Calib</span> = <span class="mxinfo" id="T2:U88">0.3</span></span> ; <span class="comment">% m  用于标定的数据的最小运动位移长度</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,27" id="srcline27">27</a></span><span class="line"><span class="mxinfo" id="T2:U89"><span class="mxinfo" id="T2:U90"><span class="var type1" id="S3T73U130">INSVNSCalibSet</span>.MaxTime_Calib</span> = <span class="mxinfo" id="T2:U92">2</span></span>  ;  <span class="comment">% sec  用于标定的数据的最长时间</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,28" id="srcline28">28</a></span><span class="line"><span class="mxinfo" id="T2:U93"><span class="mxinfo" id="T2:U94"><span class="var type1" id="S3T73U136">INSVNSCalibSet</span>.MaxVXY_DirectionChange_Calib</span> = <span class="mxinfo" id="T2:U96"><span class="mxinfo" id="T2:U97">30*pi</span>/<span class="mxinfo" id="T2:U98">180</span></span></span> ;     <span class="comment">% ° XY平面速度方向变化最大范围</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,29" id="srcline29">29</a></span><span class="line"><span class="mxinfo" id="T2:U99"><span class="mxinfo" id="T2:U100"><span class="var type1" id="S3T73U147">INSVNSCalibSet</span>.MaxVZ_Calib</span> = <span class="mxinfo" id="T2:U102">0.1</span></span> ;     <span class="comment">% m/s Z方向速度最大绝对值</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,30" id="srcline30">30</a></span><span class="line"><span class="mxinfo" id="T2:U103"><span class="mxinfo" id="T2:U104"><span class="var type1" id="S3T73U153">INSVNSCalibSet</span>.MinVXY_Calib</span> = <span class="mxinfo" id="T2:U106">0.2</span></span>;      <span class="comment">% m/s XY 平面速度模最小绝对值</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,31" id="srcline31">31</a></span><span class="line"><span class="mxinfo" id="T2:U107"><span class="mxinfo" id="T2:U108"><span class="var type1" id="S3T73U159">INSVNSCalibSet</span>.angleUniformityErr</span> = <span class="mxinfo" id="T2:U110"><span class="mxinfo" id="T2:U111">10*pi</span>/<span class="mxinfo" id="T2:U112">180</span></span></span> ; <span class="comment">% ° 位移矢量方向均匀性误差</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,32" id="srcline32">32</a></span><span class="line"><span class="comment">% 速度计算</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,33" id="srcline33">33</a></span><span class="line"><span class="mxinfo" id="T2:U113"><span class="mxinfo" id="T2:U114"><span class="var type1" id="S3T73U170">INSVNSCalibSet</span>.dT_CalV_Calib</span> = <span class="mxinfo" id="T2:U116">0.15</span></span> ; <span class="comment">% 计算速度时间步长（标定位移数据选择）  0.1 </span></span></span>
<span class="srcline"><span class="lineno"><a href="86,34" id="srcline34">34</a></span><span class="line"><span class="mxinfo" id="T2:U117"><span class="mxinfo" id="T2:U118"><span class="var type1" id="S3T73U176">INSVNSCalibSet</span>.MinXYVNorm_CalAngle</span> = <span class="mxinfo" id="T2:U120">0.1</span></span> ;  <span class="comment">%  m/s xy速度模大于这个值才计算速度的反向</span></span></span>
<span class="srcline"><span class="lineno"><a href="86,35" id="srcline35">35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="86,36" id="srcline36">36</a></span><span class="line"><span class="mxinfo" id="T2:U121"><span class="mxinfo" id="T2:U122"><span class="var type1" id="S2T72U182">makerTrackThreshold</span>.INSMarkH0</span> = <span class="mxinfo" id="T2:U124">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="86,37" id="srcline37">37</a></span><span class="line"><span class="mxinfo" id="T2:U125"><span class="mxinfo" id="T2:U126"><span class="var type1" id="S2T72U189">makerTrackThreshold</span>.VNSMarkH0</span> = <span class="mxinfo" id="T2:U128">NaN</span></span> ;</span></span>
</pre>
