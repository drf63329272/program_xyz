<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,549" id="srcline549">549</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,550" id="srcline550">550</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S184T61U2352">WaveResult</span> = GetWaveResult( <span class="var type1" id="S185T6U2355">WaveFlag</span>,<span class="var type1" id="S186T42U2356">validN</span>,<span class="var type1" id="S187T2U2357">k_global</span>,<span class="var type1" id="S188T1U2358">fre</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,551" id="srcline551">551</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,552" id="srcline552">552</a></span><span class="line"><span class="mxinfo" id="T2:U6"><span class="var type1" id="S189T2U2361">M</span> = <span class="mxinfo" id="T2:U8">size(<span class="var type1" id="S185T6U2364">WaveFlag</span>,1)</span></span>;  <span class="comment">%  马克点的个数*3</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,553" id="srcline553">553</a></span><span class="line"><span class="mxinfo" id="T61:U10"><span class="var type1" id="S184T61U2368">WaveResult</span> = <span class="mxinfo" id="T104:U12">struct</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,554" id="srcline554">554</a></span><span class="line"><span class="mxinfo" id="T2:U13"><span class="var type1" id="S192T2U2373">MaxWaveN</span> = <span class="mxinfo" id="T2:U15">20</span></span>;   <span class="comment">% 缓存的最大波特征个数</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,555" id="srcline555">555</a></span><span class="line"><span class="mxinfo" id="T60:U16"><span class="var type1" id="S193T60U2377">wave</span> = <span class="mxinfo" id="T60:U18">NaN(<span class="mxinfo" id="T2:U19"><span class="var type1" id="S189T2U2380">M</span></span>,<span class="mxinfo" id="T2:U21"><span class="var type1" id="S192T2U2381">MaxWaveN</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,556" id="srcline556">556</a></span><span class="line"><span class="mxinfo" id="T60:U23"><span class="var type1" id="S195T60U2384">time</span> = <span class="mxinfo" id="T60:U25">NaN(<span class="mxinfo" id="T2:U26"><span class="var type1" id="S189T2U2387">M</span></span>,<span class="mxinfo" id="T2:U28"><span class="var type1" id="S192T2U2388">MaxWaveN</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,557" id="srcline557">557</a></span><span class="line"><span class="mxinfo" id="T42:U30"><span class="var type1" id="S196T42U2391">waveN</span> = <span class="mxinfo" id="T42:U32">zeros(<span class="mxinfo" id="T2:U33"><span class="var type1" id="S189T2U2394">M</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,558" id="srcline558">558</a></span><span class="line"><span class="mxinfo" id="T42:U35"><span class="var type1" id="S198T42U2398">waveReadedN</span> = <span class="mxinfo" id="T42:U37">zeros(<span class="mxinfo" id="T2:U38"><span class="var type1" id="S189T2U2401">M</span></span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,559" id="srcline559">559</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,560" id="srcline560">560</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S199T2U2405">i</span>=<span class="mxinfo" id="T2:U41">1</span>:<span class="var type1" id="S189T2U2408">M</span>  <span class="comment">% 第 i 个数据维度（M/3个马克点，共有M个数据维度）</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,561" id="srcline561">561</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S200T2U2411">j</span>=<span class="mxinfo" id="T2:U44">1</span>:<span class="mxinfo" id="T2:U45"><span class="var type1" id="S186T42U2415">validN</span>(<span class="var type1" id="S199T2U2416">i</span>)</span>  <span class="comment">% 第 j 个时刻</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,562" id="srcline562">562</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo" id="T3:U48">~<span class="mxinfo" id="T3:U49">isnan( <span class="mxinfo" id="T2:U50"><span class="var type1" id="S185T6U2423">WaveFlag</span>(<span class="var type1" id="S199T2U2424">i</span>,<span class="var type1" id="S200T2U2425">j</span>)</span> )</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,563" id="srcline563">563</a></span><span class="line">            <span class="mxinfo" id="T2:U54"><span class="mxinfo" id="T2:U55"><span class="var type1" id="S196T42U2429">waveN</span>(<span class="var type1" id="S199T2U2430">i</span>)</span> = <span class="mxinfo" id="T2:U58"><span class="mxinfo" id="T2:U59"><span class="var type1" id="S196T42U2433">waveN</span>(<span class="var type1" id="S199T2U2434">i</span>)</span>+<span class="mxinfo" id="T2:U62">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,564" id="srcline564">564</a></span><span class="line">            <span class="mxinfo" id="T2:U63"><span class="mxinfo" id="T2:U64"><span class="var type1" id="S193T60U2439">wave</span>(<span class="var type1" id="S199T2U2440">i</span>,<span class="mxinfo" id="T2:U67"><span class="var type1" id="S196T42U2442">waveN</span>(<span class="var type1" id="S199T2U2443">i</span>)</span>)</span> = <span class="mxinfo" id="T2:U70"><span class="var type1" id="S185T6U2445">WaveFlag</span>(<span class="var type1" id="S199T2U2446">i</span>,<span class="var type1" id="S200T2U2447">j</span>)</span></span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="1,565" id="srcline565">565</a></span><span class="line">            <span class="mxinfo" id="T2:U74"><span class="mxinfo" id="T2:U75"><span class="var type1" id="S195T60U2451">time</span>(<span class="var type1" id="S199T2U2452">i</span>,<span class="mxinfo" id="T2:U78"><span class="var type1" id="S196T42U2454">waveN</span>(<span class="var type1" id="S199T2U2455">i</span>)</span>)</span> = <span class="mxinfo" id="T1:U81">(<span class="mxinfo" id="T2:U82"><span class="mxinfo" id="T2:U83"><span class="var type1" id="S187T2U2460">k_global</span>+<span class="var type1" id="S200T2U2461">j</span></span>-<span class="mxinfo" id="T2:U86"><span class="var type1" id="S186T42U2463">validN</span>(<span class="var type1" id="S199T2U2464">i</span>)</span></span>)/<span class="var type1" id="S188T1U2465">fre</span></span></span>;  <span class="comment">% 从程序运行的第一帧到当前的时间</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,566" id="srcline566">566</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,567" id="srcline567">567</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,568" id="srcline568">568</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,569" id="srcline569">569</a></span><span class="line"><span class="mxinfo" id="T60:U90"><span class="mxinfo" id="T60:U91"><span class="var type1" id="S184T61U2469">WaveResult</span>.wave</span> = <span class="var type1" id="S193T60U2471">wave</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,570" id="srcline570">570</a></span><span class="line"><span class="mxinfo" id="T60:U94"><span class="mxinfo" id="T60:U95"><span class="var type1" id="S184T61U2475">WaveResult</span>.time</span> = <span class="var type1" id="S195T60U2477">time</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,571" id="srcline571">571</a></span><span class="line"><span class="mxinfo" id="T42:U98"><span class="mxinfo" id="T42:U99"><span class="var type1" id="S184T61U2481">WaveResult</span>.waveN</span> = <span class="var type1" id="S196T42U2483">waveN</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,572" id="srcline572">572</a></span><span class="line"><span class="mxinfo" id="T60:U102"><span class="mxinfo" id="T60:U103"><span class="var type1" id="S184T61U2487">WaveResult</span>.wave</span> = <span class="var type1" id="S193T60U2489">wave</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,573" id="srcline573">573</a></span><span class="line"><span class="mxinfo" id="T42:U106"><span class="mxinfo" id="T42:U107"><span class="var type1" id="S184T61U2493">WaveResult</span>.waveReadedN</span> = <span class="var type1" id="S198T42U2495">waveReadedN</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,574" id="srcline574">574</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,575" id="srcline575">575</a></span><span class="line"><span class="comment">%% 一个时刻的连续性分析</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,576" id="srcline576">576</a></span><span class="line"></span></span>
</pre>
