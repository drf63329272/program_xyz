<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="56,638" id="srcline638">638</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,639" id="srcline639">639</a></span><span class="line"><span class="comment">%% 马克点连续性判断</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,640" id="srcline640">640</a></span><span class="line"><span class="comment">% dPi_ConJudge ： 连续性判断指标的大小：前后两帧的位移模</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,641" id="srcline641">641</a></span><span class="line"><span class="comment">% </span></span></span>
<span class="srcline"><span class="lineno"><a href="56,642" id="srcline642">642</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S237T44U2244">otherMakers_k</span>,<span class="var type1" id="S238T2U2245">dPi_ConJudge</span> ] = ContinuesJudge( <span class="mxinfo" id="T44:U3"><span class="mxinfo" id="T44:U4"><span class="var type1" id="S237T44U2248">otherMakers_k</span></span></span>,<span class="var type1" id="S239T68U2249">otherMakers_k_last</span>,<span class="var type1" id="S240T47U2250">trackedMakerPosition</span>,<span class="var type1" id="S241T2U2251">k_vision</span>,<span class="var type1" id="S242T38U2252">makerTrackThreshold</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="56,643" id="srcline643">643</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,644" id="srcline644">644</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,645" id="srcline645">645</a></span><span class="line"><span class="comment">% 前一时刻跟踪成功时，给出当前点是否相对跟踪成功的点连续。  Continues = 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,646" id="srcline646">646</a></span><span class="line"><span class="comment">% 前一时刻跟踪失败时，给出当前每个点是否为连续点的结果,且记录着个点能连续到往前最早（但不超过dT）的点的位置和时间。</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,647" id="srcline647">647</a></span><span class="line"><span class="comment">%        Continues = 2 ，</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,648" id="srcline648">648</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,649" id="srcline649">649</a></span><span class="line"><span class="comment">% global inertialFre visionFre  moveDistance</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,650" id="srcline650">650</a></span><span class="line"><span class="comment">% 记录每个马克点的连续特性</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,651" id="srcline651">651</a></span><span class="line"><span class="mxinfo" id="T2:U10"><span class="var type1" id="S243T2U2255">MaxOtherMarkerBufN</span> = <span class="mxinfo" id="T2:U12">size(<span class="var type1" id="S237T44U2259">otherMakers_k</span>.ContinuesFlag,2)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="56,652" id="srcline652">652</a></span><span class="line"><span class="mxinfo" id="T4:U14"><span class="var type1" id="S245T4U2264">M</span> = <span class="mxinfo" id="T4:U16"><span class="var type1" id="S237T44U2266">otherMakers_k</span>.otherMakersN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,653" id="srcline653">653</a></span><span class="line"><span class="mxinfo" id="T7:U18"><span class="mxinfo" id="T7:U19"><span class="var type1" id="S237T44U2271">otherMakers_k</span>.ContinuesFlag</span> = <span class="mxinfo" id="T7:U21">zeros(<span class="mxinfo" id="T2:U22">1</span>,<span class="mxinfo" id="T2:U23"><span class="var type1" id="S243T2U2276">MaxOtherMarkerBufN</span></span>)</span></span> ; <span class="comment">% 不连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,654" id="srcline654">654</a></span><span class="line"><span class="mxinfo" id="T3:U25"><span class="mxinfo" id="T3:U26"><span class="var type1" id="S237T44U2280">otherMakers_k</span>.ContinuesLastPosition</span> = <span class="mxinfo" id="T3:U28">NaN(<span class="mxinfo" id="T2:U29">3</span>,<span class="mxinfo" id="T2:U30"><span class="var type1" id="S243T2U2285">MaxOtherMarkerBufN</span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,655" id="srcline655">655</a></span><span class="line"><span class="mxinfo" id="T7:U32"><span class="mxinfo" id="T7:U33"><span class="var type1" id="S237T44U2289">otherMakers_k</span>.ContinuesLastTime</span> = <span class="mxinfo" id="T7:U35">NaN(<span class="mxinfo" id="T2:U36">1</span>,<span class="mxinfo" id="T2:U37"><span class="var type1" id="S243T2U2294">MaxOtherMarkerBufN</span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,656" id="srcline656">656</a></span><span class="line"><span class="mxinfo" id="T3:U39"><span class="var type1" id="S248T3U2297">otherMakersPosition_k</span> = <span class="mxinfo" id="T3:U41"><span class="var type1" id="S237T44U2299">otherMakers_k</span>.Position</span></span> ;  </span></span>
<span class="srcline"><span class="lineno"><a href="56,657" id="srcline657">657</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,658" id="srcline658">658</a></span><span class="line"><span class="mxinfo" id="T2:U43"><span class="var type1" id="S238T2U2303">dPi_ConJudge</span>=<span class="mxinfo" id="T2:U45">nan</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="56,659" id="srcline659">659</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,660" id="srcline660">660</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T14:U46"><span class="var type1" id="S241T2U2309">k_vision</span>&gt;<span class="mxinfo" id="T2:U48">1</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="56,661" id="srcline661">661</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="56,662" id="srcline662">662</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T14:U49">~<span class="mxinfo" id="T14:U50">isnan(<span class="mxinfo" id="T2:U51"><span class="var type1" id="S240T47U2317">trackedMakerPosition</span>(<span class="mxinfo" id="T2:U53">1</span>,<span class="mxinfo" id="T2:U54"><span class="var type1" id="S241T2U2320">k_vision</span>-<span class="mxinfo" id="T2:U56">1</span></span>)</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,663" id="srcline663">663</a></span><span class="line">        <span class="comment">%% 只判断当前马克点是否与前时刻跟踪成功的马克点连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,664" id="srcline664">664</a></span><span class="line">        <span class="mxinfo" id="T6:U57"><span class="var type1" id="S251T6U2324">trackedMakerPosition_kLast</span> = <span class="mxinfo" id="T6:U59"><span class="var type1" id="S240T47U2326">trackedMakerPosition</span>(:,<span class="mxinfo" id="T2:U61"><span class="var type1" id="S241T2U2329">k_vision</span>-<span class="mxinfo" id="T2:U63">1</span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,665" id="srcline665">665</a></span><span class="line">        <span class="mxinfo" id="T3:U64"><span class="var type1" id="S252T3U2333">otherMakersPosition_k_Dis</span> = <span class="mxinfo" id="T3:U66"><span class="var type1" id="S248T3U2335">otherMakersPosition_k</span>-<span class="mxinfo" id="T46:U68">repmat(<span class="var type1" id="S251T6U2338">trackedMakerPosition_kLast</span>,1,<span class="var type1" id="S245T4U2340">M</span>)</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,666" id="srcline666">666</a></span><span class="line">        <span class="mxinfo" id="T48:U71"><span class="var type1" id="S254T48U2343">otherMakersPosition_k_Dis_Norm</span> = <span class="mxinfo" id="T48:U73">zeros(<span class="mxinfo" id="T2:U74">1</span>,<span class="var type1" id="S245T4U2347">M</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="56,667" id="srcline667">667</a></span><span class="line">        <span class="mxinfo" id="T4:U76"><span class="keyword">for</span> <span class="var type1" id="S255T4U2350">j</span>=<span class="mxinfo" id="T4:U78">1</span>:<span class="var type1" id="S245T4U2353">M</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,668" id="srcline668">668</a></span><span class="line"><span class="mxinfo" id="T4:U76">            <span class="mxinfo" id="T2:U80"><span class="mxinfo" id="T2:U81"><span class="var type1" id="S254T48U2357">otherMakersPosition_k_Dis_Norm</span>(<span class="var type1" id="S255T4U2358">j</span>)</span> = <span class="mxinfo" id="T2:U84">normest(<span class="mxinfo" id="T6:U85"><span class="var type1" id="S252T3U2362">otherMakersPosition_k_Dis</span>(:,<span class="var type1" id="S255T4U2364">j</span>)</span>)</span></span>;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,669" id="srcline669">669</a></span><span class="line"><span class="mxinfo" id="T4:U76">        <span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,670" id="srcline670">670</a></span><span class="line">        <span class="mxinfo" id="T2:U88">[<span class="var type1" id="S238T2U2368">dPi_ConJudge</span>,<span class="var type1" id="S257T2U2369">minCon_k</span>] = min(<span class="var type1" id="S254T48U2372">otherMakersPosition_k_Dis_Norm</span>)</span>;  </span></span>
<span class="srcline"><span class="lineno"><a href="56,671" id="srcline671">671</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo" id="T14:U92"><span class="var type1" id="S238T2U2376">dPi_ConJudge</span> &lt; <span class="mxinfo" id="T2:U94"><span class="var type1" id="S242T38U2378">makerTrackThreshold</span>.MaxContinuesDisplacement</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,672" id="srcline672">672</a></span><span class="line">    <span class="comment">%         trackedMakerPosition_k_OK = otherMakersPosition_k(:,m) ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,673" id="srcline673">673</a></span><span class="line">    <span class="comment">%         TrackFlag = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,674" id="srcline674">674</a></span><span class="line">    <span class="comment">%         fprintf('马克点连续：位移=%0.4f，跟踪OK \n',Min_otherMakersPosition_k_Dis_Norm);</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,675" id="srcline675">675</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="56,676" id="srcline676">676</a></span><span class="line">            <span class="mxinfo" id="T2:U96"><span class="mxinfo" id="T2:U97"><span class="mxinfo" id="T7:U98"><span class="var type1" id="S237T44U2384">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S257T2U2386">minCon_k</span>)</span> = <span class="mxinfo" id="T2:U101">1</span></span> ; <span class="comment">% 连续，且是与跟踪成功马克点连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,677" id="srcline677">677</a></span><span class="line">            <span class="mxinfo" id="T6:U102"><span class="mxinfo" id="T6:U103"><span class="mxinfo" id="T3:U104"><span class="var type1" id="S237T44U2392">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S257T2U2395">minCon_k</span>)</span> = <span class="var type1" id="S251T6U2396">trackedMakerPosition_kLast</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,678" id="srcline678">678</a></span><span class="line">            <span class="mxinfo" id="T2:U108"><span class="mxinfo" id="T2:U109"><span class="mxinfo" id="T7:U110"><span class="var type1" id="S237T44U2401">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S257T2U2403">minCon_k</span>)</span> = <span class="mxinfo" id="T2:U113"><span class="var type1" id="S239T68U2405">otherMakers_k_last</span>.time</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,679" id="srcline679">679</a></span><span class="line">            <span class="mxinfo" id="T2:U115"><span class="mxinfo" id="T2:U116"><span class="mxinfo" id="T7:U117"><span class="var type1" id="S237T44U2411">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S257T2U2413">minCon_k</span>)</span> = <span class="mxinfo" id="T2:U120"><span class="var type1" id="S241T2U2415">k_vision</span>-<span class="mxinfo" id="T2:U122">1</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,680" id="srcline680">680</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,681" id="srcline681">681</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="56,682" id="srcline682">682</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,683" id="srcline683">683</a></span><span class="line">        <span class="comment">%% 判断当前马克点是否为连续马克点，记录每个点对应的最早（但不超过dT）连续点</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,684" id="srcline684">684</a></span><span class="line">        <span class="mxinfo" id="T4:U123"><span class="var type1" id="S259T4U2420">M_last</span> = <span class="mxinfo" id="T4:U125"><span class="var type1" id="S239T68U2422">otherMakers_k_last</span>.otherMakersN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="56,685" id="srcline685">685</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo" id="T14:U127"><span class="var type1" id="S259T4U2427">M_last</span>==<span class="mxinfo" id="T2:U129">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,686" id="srcline686">686</a></span><span class="line">            <span class="comment">% 上时刻无马克点</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,687" id="srcline687">687</a></span><span class="line">            <span class="mxinfo" id="T4:U130"><span class="keyword">for</span> <span class="var type1" id="S260T4U2431">i</span>=<span class="mxinfo" id="T4:U132">1</span>:<span class="var type1" id="S245T4U2434">M</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,688" id="srcline688">688</a></span><span class="line"><span class="mxinfo" id="T4:U130">                <span class="mxinfo" id="T2:U134"><span class="mxinfo" id="T2:U135"><span class="mxinfo" id="T7:U136"><span class="var type1" id="S237T44U2439">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S260T4U2441">i</span>)</span> = <span class="mxinfo" id="T2:U139">0</span></span> ; </span><span class="comment"><span class="mxinfo" id="T4:U130">% 不连续</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,689" id="srcline689">689</a></span><span class="line"><span class="mxinfo" id="T4:U130">                <span class="mxinfo" id="T6:U140"><span class="mxinfo" id="T6:U141"><span class="mxinfo" id="T3:U142"><span class="var type1" id="S237T44U2447">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S260T4U2450">i</span>)</span> = <span class="mxinfo" id="T2:U145">NaN</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,690" id="srcline690">690</a></span><span class="line"><span class="mxinfo" id="T4:U130">                <span class="mxinfo" id="T2:U146"><span class="mxinfo" id="T2:U147"><span class="mxinfo" id="T7:U148"><span class="var type1" id="S237T44U2457">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S260T4U2459">i</span>)</span> = <span class="mxinfo" id="T2:U151">NaN</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,691" id="srcline691">691</a></span><span class="line"><span class="mxinfo" id="T4:U130">                <span class="mxinfo" id="T2:U152"><span class="mxinfo" id="T2:U153"><span class="mxinfo" id="T7:U154"><span class="var type1" id="S237T44U2466">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S260T4U2468">i</span>)</span> = <span class="mxinfo" id="T2:U157">NaN</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,692" id="srcline692">692</a></span><span class="line"><span class="mxinfo" id="T4:U130">            <span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,693" id="srcline693">693</a></span><span class="line">            <span class="mxinfo" id="T2:U158"><span class="var type1" id="S238T2U2473">dPi_ConJudge</span>=<span class="mxinfo" id="T2:U160">nan</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="56,694" id="srcline694">694</a></span><span class="line">            <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="56,695" id="srcline695">695</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,696" id="srcline696">696</a></span><span class="line">        <span class="comment">% 一共有 M*M_last 种组合</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,697" id="srcline697">697</a></span><span class="line">        <span class="mxinfo" id="T4:U161"><span class="keyword">for</span> <span class="var type1" id="S260T4U2479">i</span>=<span class="mxinfo" id="T4:U163">1</span>:<span class="var type1" id="S245T4U2482">M</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,698" id="srcline698">698</a></span><span class="line"><span class="mxinfo" id="T4:U161">            <span class="mxinfo" id="T69:U165"><span class="var type1" id="S261T69U2485">dPi</span> = <span class="mxinfo" id="T69:U167"><span class="mxinfo" id="T46:U168">repmat(<span class="mxinfo" id="T6:U169"><span class="mxinfo" id="T3:U170"><span class="var type1" id="S237T44U2491">otherMakers_k</span>.Position</span>( :,<span class="var type1" id="S260T4U2494">i</span> )</span>,1,<span class="var type1" id="S259T4U2496">M_last</span>)</span>- <span class="mxinfo" id="T69:U174"><span class="var type1" id="S239T68U2498">otherMakers_k_last</span>.Position</span></span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,699" id="srcline699">699</a></span><span class="line"><span class="mxinfo" id="T4:U161">            <span class="mxinfo" id="T48:U176"><span class="var type1" id="S262T48U2502">dPiNorm</span> = <span class="mxinfo" id="T48:U178">zeros(<span class="mxinfo" id="T2:U179">1</span>,<span class="var type1" id="S259T4U2506">M_last</span>)</span></span>;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,700" id="srcline700">700</a></span><span class="line"><span class="mxinfo" id="T4:U161">            <span class="mxinfo" id="T4:U181"><span class="keyword">for</span> <span class="var type1" id="S255T4U2509">j</span>=<span class="mxinfo" id="T4:U183">1</span>:<span class="var type1" id="S259T4U2512">M_last</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,701" id="srcline701">701</a></span><span class="line"><span class="mxinfo" id="T4:U161"><span class="mxinfo" id="T4:U181">                <span class="mxinfo" id="T2:U185"><span class="mxinfo" id="T2:U186"><span class="var type1" id="S262T48U2516">dPiNorm</span>(<span class="var type1" id="S255T4U2517">j</span>)</span> = <span class="mxinfo" id="T2:U189">normest(<span class="mxinfo" id="T6:U190"><span class="var type1" id="S261T69U2521">dPi</span>(:,<span class="var type1" id="S255T4U2523">j</span>)</span>)</span></span>;</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,702" id="srcline702">702</a></span><span class="line"><span class="mxinfo" id="T4:U161"><span class="mxinfo" id="T4:U181">            <span class="keyword">end</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,703" id="srcline703">703</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="56,704" id="srcline704">704</a></span><span class="line"><span class="mxinfo" id="T4:U161">            <span class="mxinfo" id="T2:U193">[<span class="var type1" id="S238T2U2527">dPi_ConJudge</span>,<span class="var type1" id="S263T2U2528">min_i</span>] = min(<span class="var type1" id="S262T48U2531">dPiNorm</span>)</span>;</span>   </span></span>
<span class="srcline"><span class="lineno"><a href="56,705" id="srcline705">705</a></span><span class="line"><span class="mxinfo" id="T4:U161">            <span class="keyword">if</span> <span class="mxinfo" id="T14:U197"><span class="mxinfo" id="T2:U198">normest(<span class="var type1" id="S238T2U2537">dPi_ConJudge</span>)</span> &lt; <span class="mxinfo" id="T2:U200"><span class="var type1" id="S242T38U2539">makerTrackThreshold</span>.MaxContinuesDisplacement</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,706" id="srcline706">706</a></span><span class="line"><span class="mxinfo" id="T4:U161">                </span><span class="comment"><span class="mxinfo" id="T4:U161">%  otherMakers_k.Position( :,i ) 与 otherMakers_k_last.Position(:,min_i) 连续</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,707" id="srcline707">707</a></span><span class="line"><span class="mxinfo" id="T4:U161">                </span><span class="comment"><span class="mxinfo" id="T4:U161">% 找到一个连续的点，记录上一点</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,708" id="srcline708">708</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="mxinfo" id="T2:U202"><span class="mxinfo" id="T2:U203"><span class="mxinfo" id="T7:U204"><span class="var type1" id="S237T44U2545">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S260T4U2547">i</span>)</span> = <span class="mxinfo" id="T2:U207">2</span></span> ; </span><span class="comment"><span class="mxinfo" id="T4:U161">% 连续，和跟踪失败的点连续</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,709" id="srcline709">709</a></span><span class="line"><span class="mxinfo" id="T4:U161">                </span><span class="comment"><span class="mxinfo" id="T4:U161">% 如果前一个点为连续点，则将前一个点的连续记录传递过来</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,710" id="srcline710">710</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="keyword">if</span> <span class="mxinfo" id="T14:U208"><span class="mxinfo" id="T2:U209"><span class="mxinfo" id="T7:U210"><span class="var type1" id="S239T68U2554">otherMakers_k_last</span>.ContinuesFlag</span>(<span class="var type1" id="S263T2U2556">min_i</span>)</span> == <span class="mxinfo" id="T2:U213">2</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,711" id="srcline711">711</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T2:U214"><span class="mxinfo" id="T2:U215"><span class="mxinfo" id="T7:U216"><span class="var type1" id="S237T44U2562">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S260T4U2564">i</span>)</span> = <span class="mxinfo" id="T2:U219"><span class="mxinfo" id="T7:U220"><span class="var type1" id="S239T68U2567">otherMakers_k_last</span>.ContinuesLastK</span>(<span class="var type1" id="S263T2U2569">min_i</span>)</span></span> ; </span><span class="comment"><span class="mxinfo" id="T4:U161">% 传递记录上一个时刻存储的连续信息</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,712" id="srcline712">712</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T6:U223"><span class="mxinfo" id="T6:U224"><span class="mxinfo" id="T3:U225"><span class="var type1" id="S237T44U2574">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S260T4U2577">i</span>)</span> = <span class="mxinfo" id="T6:U228"><span class="mxinfo" id="T3:U229"><span class="var type1" id="S239T68U2580">otherMakers_k_last</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S263T2U2583">min_i</span>)</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,713" id="srcline713">713</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T2:U232"><span class="mxinfo" id="T2:U233"><span class="mxinfo" id="T7:U234"><span class="var type1" id="S237T44U2588">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S260T4U2590">i</span>)</span> = <span class="mxinfo" id="T2:U237"><span class="mxinfo" id="T7:U238"><span class="var type1" id="S239T68U2593">otherMakers_k_last</span>.ContinuesLastTime</span>(<span class="var type1" id="S263T2U2595">min_i</span>)</span></span>;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,714" id="srcline714">714</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="keyword">elseif</span> <span class="mxinfo" id="T14:U241"><span class="mxinfo" id="T2:U242"><span class="mxinfo" id="T7:U243"><span class="var type1" id="S239T68U2600">otherMakers_k_last</span>.ContinuesFlag</span>(<span class="var type1" id="S263T2U2602">min_i</span>)</span> == <span class="mxinfo" id="T2:U246">0</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,715" id="srcline715">715</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T2:U247"><span class="mxinfo" id="T2:U248"><span class="mxinfo" id="T7:U249"><span class="var type1" id="S237T44U2608">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S260T4U2610">i</span>)</span> = <span class="mxinfo" id="T2:U252"><span class="var type1" id="S241T2U2612">k_vision</span>-<span class="mxinfo" id="T2:U254">1</span></span></span> ; </span><span class="comment"><span class="mxinfo" id="T4:U161">% 直接记录上一个时刻</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,716" id="srcline716">716</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T6:U255"><span class="mxinfo" id="T6:U256"><span class="mxinfo" id="T3:U257"><span class="var type1" id="S237T44U2618">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S260T4U2621">i</span>)</span> = <span class="mxinfo" id="T6:U260"><span class="mxinfo" id="T69:U261"><span class="var type1" id="S239T68U2624">otherMakers_k_last</span>.Position</span>( :,<span class="var type1" id="S263T2U2627">min_i</span> )</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,717" id="srcline717">717</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T2:U264"><span class="mxinfo" id="T2:U265"><span class="mxinfo" id="T7:U266"><span class="var type1" id="S237T44U2632">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S260T4U2634">i</span>)</span> = <span class="mxinfo" id="T2:U269"><span class="var type1" id="S239T68U2636">otherMakers_k_last</span>.time</span></span> ;</span>                    </span></span>
<span class="srcline"><span class="lineno"><a href="56,718" id="srcline718">718</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="keyword">elseif</span> <span class="mxinfo" id="T14:U271"><span class="mxinfo" id="T2:U272"><span class="mxinfo" id="T7:U273"><span class="var type1" id="S239T68U2642">otherMakers_k_last</span>.ContinuesFlag</span>(<span class="var type1" id="S263T2U2644">min_i</span>)</span> == <span class="mxinfo" id="T2:U276">1</span></span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="56,719" id="srcline719">719</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    </span><span class="comment"><span class="mxinfo" id="T4:U161">% 与跟踪成功点连续检测成功，但跟踪识别失败的情况，传递到现在。如果传递时间超过2秒，则不再传递。</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,720" id="srcline720">720</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="keyword">if</span> <span class="mxinfo" id="T14:U277">(<span class="mxinfo" id="T2:U278"><span class="mxinfo" id="T2:U279"><span class="mxinfo" id="T7:U280"><span class="var type1" id="S239T68U2653">otherMakers_k_last</span>.ContinuesLastTime</span>(<span class="var type1" id="S263T2U2655">min_i</span>)</span>-<span class="mxinfo" id="T2:U283"><span class="var type1" id="S237T44U2657">otherMakers_k</span>.time</span></span>) &gt; <span class="mxinfo" id="T2:U285">20</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,721" id="srcline721">721</a></span><span class="line"><span class="mxinfo" id="T4:U161">                        <span class="mxinfo" id="T2:U286"><span class="mxinfo" id="T2:U287"><span class="mxinfo" id="T7:U288"><span class="var type1" id="S237T44U2664">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S260T4U2666">i</span>)</span> = <span class="mxinfo" id="T2:U291">2</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,722" id="srcline722">722</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="keyword">else</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,723" id="srcline723">723</a></span><span class="line"><span class="mxinfo" id="T4:U161">                        <span class="mxinfo" id="T2:U292"><span class="mxinfo" id="T2:U293"><span class="mxinfo" id="T7:U294"><span class="var type1" id="S237T44U2673">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S260T4U2675">i</span>)</span> = <span class="mxinfo" id="T2:U297">1</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,724" id="srcline724">724</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="keyword">end</span></span>                    </span></span>
<span class="srcline"><span class="lineno"><a href="56,725" id="srcline725">725</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T2:U298"><span class="mxinfo" id="T2:U299"><span class="mxinfo" id="T7:U300"><span class="var type1" id="S237T44U2681">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S260T4U2683">i</span>)</span> = <span class="mxinfo" id="T2:U303"><span class="mxinfo" id="T7:U304"><span class="var type1" id="S239T68U2686">otherMakers_k_last</span>.ContinuesLastK</span>(<span class="var type1" id="S263T2U2688">min_i</span>)</span></span> ; </span><span class="comment"><span class="mxinfo" id="T4:U161">% 传递记录上一个时刻存储的连续信息</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,726" id="srcline726">726</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T6:U307"><span class="mxinfo" id="T6:U308"><span class="mxinfo" id="T3:U309"><span class="var type1" id="S237T44U2693">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S260T4U2696">i</span>)</span> = <span class="mxinfo" id="T6:U312"><span class="mxinfo" id="T3:U313"><span class="var type1" id="S239T68U2699">otherMakers_k_last</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S263T2U2702">min_i</span>)</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,727" id="srcline727">727</a></span><span class="line"><span class="mxinfo" id="T4:U161">                    <span class="mxinfo" id="T2:U316"><span class="mxinfo" id="T2:U317"><span class="mxinfo" id="T7:U318"><span class="var type1" id="S237T44U2707">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S260T4U2709">i</span>)</span> = <span class="mxinfo" id="T2:U321"><span class="mxinfo" id="T7:U322"><span class="var type1" id="S239T68U2712">otherMakers_k_last</span>.ContinuesLastTime</span>(<span class="var type1" id="S263T2U2714">min_i</span>)</span></span>;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,728" id="srcline728">728</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,729" id="srcline729">729</a></span><span class="line"><span class="mxinfo" id="T4:U161">            <span class="keyword">else</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,730" id="srcline730">730</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="mxinfo" id="T2:U325"><span class="mxinfo" id="T2:U326"><span class="mxinfo" id="T7:U327"><span class="var type1" id="S237T44U2720">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S260T4U2722">i</span>)</span> = <span class="mxinfo" id="T2:U330">0</span></span> ; </span><span class="comment"><span class="mxinfo" id="T4:U161">% 不连续</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,731" id="srcline731">731</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="mxinfo" id="T6:U331"><span class="mxinfo" id="T6:U332"><span class="mxinfo" id="T3:U333"><span class="var type1" id="S237T44U2728">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S260T4U2731">i</span>)</span> = <span class="mxinfo" id="T2:U336">NaN</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,732" id="srcline732">732</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="mxinfo" id="T2:U337"><span class="mxinfo" id="T2:U338"><span class="mxinfo" id="T7:U339"><span class="var type1" id="S237T44U2738">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S260T4U2740">i</span>)</span> = <span class="mxinfo" id="T2:U342">NaN</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,733" id="srcline733">733</a></span><span class="line"><span class="mxinfo" id="T4:U161">                <span class="mxinfo" id="T2:U343"><span class="mxinfo" id="T2:U344"><span class="mxinfo" id="T7:U345"><span class="var type1" id="S237T44U2747">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S260T4U2749">i</span>)</span> = <span class="mxinfo" id="T2:U348">NaN</span></span> ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,734" id="srcline734">734</a></span><span class="line"><span class="mxinfo" id="T4:U161">            <span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,735" id="srcline735">735</a></span><span class="line">                        </span></span>
<span class="srcline"><span class="lineno"><a href="56,736" id="srcline736">736</a></span><span class="line"><span class="mxinfo" id="T4:U161">        <span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,737" id="srcline737">737</a></span><span class="line">        </span></span>
<span class="srcline"><span class="lineno"><a href="56,738" id="srcline738">738</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,739" id="srcline739">739</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,740" id="srcline740">740</a></span><span class="line">    <span class="mxinfo" id="T2:U349"><span class="var type1" id="S238T2U2755">dPi_ConJudge</span>=<span class="mxinfo" id="T2:U351">nan</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="56,741" id="srcline741">741</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="56,742" id="srcline742">742</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,743" id="srcline743">743</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,744" id="srcline744">744</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="56,745" id="srcline745">745</a></span><span class="line"><span class="comment">%% 查找惯性k时刻前运动了大于 dS 距离的最近的点</span></span></span>
<span class="srcline"><span class="lineno"><a href="56,746" id="srcline746">746</a></span><span class="line"><span class="comment">% 且该点trackedMakerPosition跟踪成功</span></span></span>
</pre>
