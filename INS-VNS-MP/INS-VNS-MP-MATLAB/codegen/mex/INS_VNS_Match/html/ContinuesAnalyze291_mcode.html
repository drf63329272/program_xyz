<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,574" id="srcline574">574</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,575" id="srcline575">575</a></span><span class="line"><span class="comment">%% 一个时刻的连续性分析</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,576" id="srcline576">576</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,577" id="srcline577">577</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S203T69U2498">otherMakers</span>,<span class="var type1" id="S204T2U2499">IsLostMark</span> ] = ContinuesAnalyze( <span class="mxinfo" id="T69:U3"><span class="mxinfo" id="T69:U4"><span class="var type1" id="S203T69U2502">otherMakers</span></span></span>,<span class="var type1" id="S205T2U2503">k_vision</span>,<span class="mxinfo" id="T2:U7"><span class="var type2" id="S206T2V1U2504">INS_Joint_N</span></span>,<span class="var type1" id="S207T1U2505">visionFre</span>,<span class="mxinfo" id="T2:U10"><span class="var type2" id="S208T2V2U2506">VBN</span></span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,578" id="srcline578">578</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,579" id="srcline579">579</a></span><span class="line"><span class="keyword">persistent</span> <span class="var type1" id="S209T72U2508">makerTrackThreshold</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,580" id="srcline580">580</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T3:U13"><span class="mxinfo" id="T3:U14">isempty(<span class="var type0" id="S209T0U2513">makerTrackThreshold</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,581" id="srcline581">581</a></span><span class="line">    <span class="mxinfo" id="T72:U15">[ <span class="var type1" id="S209T72U2517">makerTrackThreshold</span>,<span class="mxinfo" id="T2:U17"><span class="mxinfo" id="T2:U18">~</span></span> ] = <span class="fcn" id="F292N22:B2520">SetConstParameters</span>( <span class="var type1" id="S207T1U2521">visionFre</span> )</span>; </span></span>
<span class="srcline"><span class="lineno"><a href="1,582" id="srcline582">582</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,583" id="srcline583">583</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,584" id="srcline584">584</a></span><span class="line"><span class="mxinfo" id="T44:U20"><span class="var type1" id="S212T44U2524">trackedMakerPosition</span> = <span class="mxinfo" id="T44:U22">NaN(3,<span class="var type1" id="S208T2U2528">VBN</span>)</span></span>;  <span class="comment">% 无跟踪情况下的连续性</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,585" id="srcline585">585</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,586" id="srcline586">586</a></span><span class="line"><span class="mxinfo" id="T62:U24"><span class="mxinfo" id="T62:U25"><span class="var type1" id="S203T69U2532">otherMakers</span>(<span class="var type1" id="S205T2U2533">k_vision</span>)</span> = <span class="mxinfo" id="T62:U28"><span class="fcn" id="F305N19:B2535">PreProcess_otherMakers</span>( <span class="mxinfo" id="T62:U29"><span class="var type1" id="S203T69U2537">otherMakers</span>(<span class="var type1" id="S205T2U2538">k_vision</span>)</span>  )</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,587" id="srcline587">587</a></span><span class="line"><span class="mxinfo" id="T62:U32"><span class="var type1" id="S215T62U2541">otherMakers_k_last</span> = <span class="mxinfo" id="T62:U34"><span class="var type1" id="S203T69U2543">otherMakers</span>(<span class="mxinfo" id="T2:U36"><span class="var type1" id="S205T2U2545">k_vision</span>-<span class="mxinfo" id="T2:U38">1</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,588" id="srcline588">588</a></span><span class="line"><span class="mxinfo" id="T62:U39">[ <span class="var type1" id="S203T69U2551">otherMakers</span>(<span class="var type1" id="S205T2U2552">k_vision</span>),<span class="var type1" id="S216T2U2553">dPi_ConJudge</span> ] = <span class="fcn" id="F326N8:B2555">ContinuesJudge</span>( <span class="mxinfo" id="T62:U43"><span class="var type1" id="S203T69U2557">otherMakers</span>(<span class="var type1" id="S205T2U2558">k_vision</span>)</span>,<span class="var type1" id="S215T62U2559">otherMakers_k_last</span>,<span class="keyword">...</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,589" id="srcline589">589</a></span><span class="line"><span class="mxinfo" id="T62:U39">    <span class="var type1" id="S212T44U2560">trackedMakerPosition</span>,<span class="var type1" id="S205T2U2561">k_vision</span>,<span class="var type1" id="S209T72U2562">makerTrackThreshold</span> )</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,590" id="srcline590">590</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,591" id="srcline591">591</a></span><span class="line"><span class="comment">%% 判断是否有马克点丢失情况</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,592" id="srcline592">592</a></span><span class="line"><span class="mxinfo" id="T76:U50"><span class="var type1" id="S218T76U2565">InitialJointK_k</span> = <span class="mxinfo" id="T76:U52"><span class="mxinfo" id="T64:U53"><span class="mxinfo" id="T62:U54"><span class="var type1" id="S203T69U2569">otherMakers</span>(<span class="var type1" id="S205T2U2570">k_vision</span>)</span>.InitialJointK</span>(<span class="mxinfo" id="T76:U57"><span class="mxinfo" id="T2:U58">1</span>:<span class="mxinfo" id="T2:U59"><span class="var type1" id="S206T2U2574">INS_Joint_N</span></span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="1,593" id="srcline593">593</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T3:U61"><span class="mxinfo" id="T2:U62">sum(<span class="mxinfo" id="T77:U63">isnan(<span class="var type1" id="S218T76U2582">InitialJointK_k</span>)</span>)</span> == <span class="mxinfo" id="T2:U65">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,594" id="srcline594">594</a></span><span class="line">    <span class="comment">% 没有马克点丢失，不需要识别</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,595" id="srcline595">595</a></span><span class="line">    <span class="mxinfo" id="T2:U66"><span class="var type1" id="S204T2U2586">IsLostMark</span> = <span class="mxinfo" id="T2:U68">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,596" id="srcline596">596</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,597" id="srcline597">597</a></span><span class="line">    <span class="mxinfo" id="T2:U69"><span class="var type1" id="S204T2U2591">IsLostMark</span> = <span class="mxinfo" id="T2:U71">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,598" id="srcline598">598</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,599" id="srcline599">599</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,600" id="srcline600">600</a></span><span class="line"><span class="comment">%% （一个时刻） 输入马克点位置， 输出加速度波形参数</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,601" id="srcline601">601</a></span><span class="line"><span class="comment">%% WaveResult</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,602" id="srcline602">602</a></span><span class="line"><span class="comment">%   WaveResult.WaveFlag</span></span></span>
</pre>
