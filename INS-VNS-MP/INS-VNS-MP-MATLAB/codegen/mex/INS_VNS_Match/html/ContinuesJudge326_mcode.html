<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="91,1" id="srcline1">  1</a></span><span class="line"><span class="comment">%% xyz</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,2" id="srcline2">  2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,3" id="srcline3">  3</a></span><span class="line"><span class="comment">%% 马克点连续性判断</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,4" id="srcline4">  4</a></span><span class="line"><span class="comment">% dPi_ConJudge ： 连续性判断指标的大小：前后两帧的位移模</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,5" id="srcline5">  5</a></span><span class="line"><span class="comment">% ContinuesFlag = 0   不连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,6" id="srcline6">  6</a></span><span class="line"><span class="comment">%               =1    连续，且是与跟踪成功马克点连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,7" id="srcline7">  7</a></span><span class="line"><span class="comment">%               =2   连续，和跟踪失败的点连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,8" id="srcline8">  8</a></span><span class="line"><span class="keyword">function</span> [ <span class="var type1" id="S2T62U3">otherMakers_k</span>,<span class="var type1" id="S3T2U4">dPi_ConJudgeOut</span> ] = ContinuesJudge( <span class="mxinfo" id="T62:U3"><span class="mxinfo" id="T62:U4"><span class="var type1" id="S2T62U7">otherMakers_k</span></span></span>,<span class="var type1" id="S4T62U8">otherMakers_k_last</span>,<span class="mxinfo" id="T44:U7"><span class="var type2" id="S5T44V6U9">trackedMakerPosition</span></span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,9" id="srcline9">  9</a></span><span class="line">    <span class="var type1" id="S6T2U10">k_vision</span>,<span class="var type1" id="S7T72U11">makerTrackThreshold</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="91,10" id="srcline10"> 10</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,11" id="srcline11"> 11</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,12" id="srcline12"> 12</a></span><span class="line"><span class="comment">% 前一时刻跟踪成功时，给出当前点是否相对跟踪成功的点连续。  Continues = 1</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,13" id="srcline13"> 13</a></span><span class="line"><span class="comment">% 前一时刻跟踪失败时，给出当前每个点是否为连续点的结果,且记录着个点能连续到往前最早（但不超过dT）的点的位置和时间。</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,14" id="srcline14"> 14</a></span><span class="line"><span class="comment">%        Continues = 2 ，</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,15" id="srcline15"> 15</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,16" id="srcline16"> 16</a></span><span class="line"><span class="comment">% global inertialFre visionFre  moveDistance</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,17" id="srcline17"> 17</a></span><span class="line"><span class="comment">% 记录每个马克点的连续特性</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,18" id="srcline18"> 18</a></span><span class="line"><span class="mxinfo" id="T2:U11"><span class="var type1" id="S8T2U14">MaxOtherMarkerBufN</span> = <span class="mxinfo" id="T2:U13">size(<span class="var type1" id="S2T62U18">otherMakers_k</span>.ContinuesFlag,2)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,19" id="srcline19"> 19</a></span><span class="line"><span class="mxinfo" id="T2:U15"><span class="var type1" id="S10T2U23">M</span> = <span class="mxinfo" id="T2:U17"><span class="var type1" id="S2T62U25">otherMakers_k</span>.otherMakersN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,20" id="srcline20"> 20</a></span><span class="line"><span class="mxinfo" id="T64:U19"><span class="mxinfo" id="T64:U20"><span class="var type1" id="S2T62U30">otherMakers_k</span>.ContinuesFlag</span> = <span class="mxinfo" id="T64:U22">zeros(<span class="mxinfo" id="T2:U23">1</span>,<span class="mxinfo" id="T2:U24"><span class="var type1" id="S8T2U35">MaxOtherMarkerBufN</span></span>)</span></span> ; <span class="comment">% 不连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,21" id="srcline21"> 21</a></span><span class="line"><span class="mxinfo" id="T63:U26"><span class="mxinfo" id="T63:U27"><span class="var type1" id="S2T62U39">otherMakers_k</span>.ContinuesLastPosition</span> = <span class="mxinfo" id="T63:U29">NaN(<span class="mxinfo" id="T2:U30">3</span>,<span class="mxinfo" id="T2:U31"><span class="var type1" id="S8T2U44">MaxOtherMarkerBufN</span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,22" id="srcline22"> 22</a></span><span class="line"><span class="mxinfo" id="T64:U33"><span class="mxinfo" id="T64:U34"><span class="var type1" id="S2T62U48">otherMakers_k</span>.ContinuesLastTime</span> = <span class="mxinfo" id="T64:U36">NaN(<span class="mxinfo" id="T2:U37">1</span>,<span class="mxinfo" id="T2:U38"><span class="var type1" id="S8T2U53">MaxOtherMarkerBufN</span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,23" id="srcline23"> 23</a></span><span class="line"><span class="mxinfo" id="T64:U40"><span class="mxinfo" id="T64:U41"><span class="var type1" id="S2T62U57">otherMakers_k</span>.InitialJointK</span> = <span class="mxinfo" id="T64:U43">NaN(<span class="mxinfo" id="T2:U44">1</span>,<span class="mxinfo" id="T2:U45"><span class="var type1" id="S8T2U62">MaxOtherMarkerBufN</span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,24" id="srcline24"> 24</a></span><span class="line"><span class="mxinfo" id="T63:U47"><span class="var type1" id="S13T63U65">otherMakersPosition_k</span> = <span class="mxinfo" id="T63:U49"><span class="var type1" id="S2T62U67">otherMakers_k</span>.Position</span></span> ;  </span></span>
<span class="srcline"><span class="lineno"><a href="91,25" id="srcline25"> 25</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,26" id="srcline26"> 26</a></span><span class="line"><span class="mxinfo" id="T2:U51"><span class="var type1" id="S3T2U71">dPi_ConJudgeOut</span>=<span class="mxinfo" id="T2:U53">nan</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,27" id="srcline27"> 27</a></span><span class="line"><span class="mxinfo" id="T58:U54"><span class="var type1" id="S15T58U76">dPi_ConJudge</span> = <span class="mxinfo" id="T58:U56">nan(<span class="mxinfo" id="T2:U57">1</span>,<span class="var type1" id="S10T2U80">M</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,28" id="srcline28"> 28</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,29" id="srcline29"> 29</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo" id="T3:U59"><span class="var type1" id="S6T2U84">k_vision</span>&gt;<span class="mxinfo" id="T2:U61">1</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="91,30" id="srcline30"> 30</a></span><span class="line">    <span class="mxinfo" id="T45:U62"><span class="var type1" id="S16T45U88">trackedMakerPosition_kLast</span> = <span class="mxinfo" id="T45:U64"><span class="var type1" id="S5T44U90">trackedMakerPosition</span>(:,<span class="mxinfo" id="T2:U66"><span class="var type1" id="S6T2U93">k_vision</span>-<span class="mxinfo" id="T2:U68">1</span></span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,31" id="srcline31"> 31</a></span><span class="line">    <span class="mxinfo" id="T2:U69"><span class="var type1" id="S17T2U97">last_Tracked_i</span> =  <span class="mxinfo" id="T2:U71"><span class="fcn" id="F327N9:B99">GetTrackedi</span>( <span class="var type1" id="S16T45U100">trackedMakerPosition_kLast</span>,<span class="var type1" id="S4T62U101">otherMakers_k_last</span> )</span></span>;  <span class="comment">% 上一时刻跟踪成功的点的序号</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,32" id="srcline32"> 32</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="91,33" id="srcline33"> 33</a></span><span class="line"><span class="comment">%     if ~isnan(trackedMakerPosition(1,k_vision-1))</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,34" id="srcline34"> 34</a></span><span class="line"><span class="comment">%         %% 只判断当前马克点是否与前时刻跟踪成功的马克点连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,35" id="srcline35"> 35</a></span><span class="line"><span class="comment">%         trackedMakerPosition_kLast = trackedMakerPosition(:,k_vision-1) ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,36" id="srcline36"> 36</a></span><span class="line"><span class="comment">%         otherMakersPosition_k_Dis = otherMakersPosition_k(:,1:M)-repmat(trackedMakerPosition_kLast,1,M) ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,37" id="srcline37"> 37</a></span><span class="line"><span class="comment">%         otherMakersPosition_k_Dis_Norm = zeros(1,M);</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,38" id="srcline38"> 38</a></span><span class="line"><span class="comment">%         for j=1:M</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,39" id="srcline39"> 39</a></span><span class="line"><span class="comment">%             otherMakersPosition_k_Dis_Norm(j) = normest(otherMakersPosition_k_Dis(:,j));</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,40" id="srcline40"> 40</a></span><span class="line"><span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,41" id="srcline41"> 41</a></span><span class="line"><span class="comment">%         [dPi_ConJudge,minCon_k] = min(otherMakersPosition_k_Dis_Norm);  </span></span></span>
<span class="srcline"><span class="lineno"><a href="91,42" id="srcline42"> 42</a></span><span class="line"><span class="comment">%         if dPi_ConJudge &lt; makerTrackThreshold.MaxContinuesDisplacement</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,43" id="srcline43"> 43</a></span><span class="line"><span class="comment">%     %         trackedMakerPosition_k_OK = otherMakersPosition_k(:,m) ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,44" id="srcline44"> 44</a></span><span class="line"><span class="comment">%     %         TrackFlag = 1;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,45" id="srcline45"> 45</a></span><span class="line"><span class="comment">%     %         fprintf('马克点连续：位移=%0.4f，跟踪OK \n',Min_otherMakersPosition_k_Dis_Norm);</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,46" id="srcline46"> 46</a></span><span class="line"><span class="comment">%             </span></span></span>
<span class="srcline"><span class="lineno"><a href="91,47" id="srcline47"> 47</a></span><span class="line"><span class="comment">%             otherMakers_k.ContinuesFlag(minCon_k) = 1 ; % 连续，且是与跟踪成功马克点连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,48" id="srcline48"> 48</a></span><span class="line"><span class="comment">%             otherMakers_k.ContinuesLastPosition(:,minCon_k) = trackedMakerPosition_kLast ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,49" id="srcline49"> 49</a></span><span class="line"><span class="comment">%             otherMakers_k.ContinuesLastTime(minCon_k) = otherMakers_k_last.time ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,50" id="srcline50"> 50</a></span><span class="line"><span class="comment">%             otherMakers_k.ContinuesLastK(minCon_k) = k_vision-1 ;</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,51" id="srcline51"> 51</a></span><span class="line"><span class="comment">%             otherMakers_k.ContinuesLasti(minCon_k) = lastTrackedi;  % 记录紧邻的上一时刻马克点序号</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,52" id="srcline52"> 52</a></span><span class="line"><span class="comment">%         else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,53" id="srcline53"> 53</a></span><span class="line"><span class="comment">%             </span></span></span>
<span class="srcline"><span class="lineno"><a href="91,54" id="srcline54"> 54</a></span><span class="line"><span class="comment">%         end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,55" id="srcline55"> 55</a></span><span class="line"><span class="comment">%         </span></span></span>
<span class="srcline"><span class="lineno"><a href="91,56" id="srcline56"> 56</a></span><span class="line"><span class="comment">%     else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,57" id="srcline57"> 57</a></span><span class="line">        <span class="comment">%% 判断当前马克点是否为连续马克点，记录每个点对应的最早（但不超过dT）连续点</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,58" id="srcline58"> 58</a></span><span class="line">        <span class="mxinfo" id="T2:U74"><span class="var type1" id="S19T2U104">M_last</span> = <span class="mxinfo" id="T2:U76"><span class="var type1" id="S4T62U106">otherMakers_k_last</span>.otherMakersN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,59" id="srcline59"> 59</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo" id="T3:U78"><span class="var type1" id="S19T2U111">M_last</span>==<span class="mxinfo" id="T2:U80">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,60" id="srcline60"> 60</a></span><span class="line">            <span class="comment">% 上时刻无马克点</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,61" id="srcline61"> 61</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S20T2U115">i</span>=<span class="mxinfo" id="T2:U82">1</span>:<span class="var type1" id="S10T2U118">M</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,62" id="srcline62"> 62</a></span><span class="line">                <span class="mxinfo" id="T2:U84"><span class="mxinfo" id="T2:U85"><span class="mxinfo" id="T64:U86"><span class="var type1" id="S2T62U123">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S20T2U125">i</span>)</span> = <span class="mxinfo" id="T2:U89">0</span></span> ; <span class="comment">% 不连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,63" id="srcline63"> 63</a></span><span class="line">                <span class="mxinfo" id="T45:U90"><span class="mxinfo" id="T45:U91"><span class="mxinfo" id="T63:U92"><span class="var type1" id="S2T62U131">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S20T2U134">i</span>)</span> = <span class="mxinfo" id="T2:U95">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,64" id="srcline64"> 64</a></span><span class="line">                <span class="mxinfo" id="T2:U96"><span class="mxinfo" id="T2:U97"><span class="mxinfo" id="T64:U98"><span class="var type1" id="S2T62U141">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S20T2U143">i</span>)</span> = <span class="mxinfo" id="T2:U101">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,65" id="srcline65"> 65</a></span><span class="line">                <span class="mxinfo" id="T2:U102"><span class="mxinfo" id="T2:U103"><span class="mxinfo" id="T64:U104"><span class="var type1" id="S2T62U150">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S20T2U152">i</span>)</span> = <span class="mxinfo" id="T2:U107">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,66" id="srcline66"> 66</a></span><span class="line">                <span class="mxinfo" id="T2:U108"><span class="mxinfo" id="T2:U109"><span class="mxinfo" id="T64:U110"><span class="var type1" id="S2T62U159">otherMakers_k</span>.ContinuesLasti</span>(<span class="var type1" id="S20T2U161">i</span>)</span> = <span class="mxinfo" id="T2:U113">NaN</span></span>;  <span class="comment">% 记录紧邻的上一时刻马克点序号</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,67" id="srcline67"> 67</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,68" id="srcline68"> 68</a></span><span class="line">            <span class="mxinfo" id="T2:U114"><span class="var type1" id="S3T2U166">dPi_ConJudgeOut</span>=<span class="mxinfo" id="T2:U116">nan</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,69" id="srcline69"> 69</a></span><span class="line">            <span class="keyword">return</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,70" id="srcline70"> 70</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,71" id="srcline71"> 71</a></span><span class="line">        <span class="comment">% 一共有 M*M_last 种组合</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,72" id="srcline72"> 72</a></span><span class="line">        <span class="keyword">for</span> <span class="mxinfo" id="T2:U117"><span class="var type1" id="S20T2U172"><span class="message warning" id="M2F326C">i</span></span></span>=<span class="mxinfo" id="T2:U118">1</span>:<span class="var type1" id="S10T2U175">M</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,73" id="srcline73"> 73</a></span><span class="line">            <span class="comment">% 当期第i个点 与 上一时刻每个点相减</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,74" id="srcline74"> 74</a></span><span class="line">            <span class="mxinfo" id="T48:U120"><span class="var type1" id="S21T48U178">dPi</span> = <span class="mxinfo" id="T48:U122"><span class="mxinfo" id="T48:U123">repmat(<span class="mxinfo" id="T45:U124"><span class="mxinfo" id="T63:U125"><span class="var type1" id="S2T62U184">otherMakers_k</span>.Position</span>( :,<span class="var type1" id="S20T2U187">i</span> )</span>,1,<span class="var type1" id="S19T2U189">M_last</span>)</span>- <span class="mxinfo" id="T48:U129"><span class="mxinfo" id="T63:U130"><span class="var type1" id="S4T62U192">otherMakers_k_last</span>.Position</span>(:,<span class="mxinfo" id="T2:U132"><span class="mxinfo" id="T2:U133">1</span>:<span class="var type1" id="S19T2U197">M_last</span></span>)</span></span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,75" id="srcline75"> 75</a></span><span class="line">            <span class="mxinfo" id="T58:U135"><span class="var type1" id="S23T58U200">dPiNorm</span> = <span class="mxinfo" id="T58:U137">zeros(<span class="mxinfo" id="T2:U138">1</span>,<span class="var type1" id="S19T2U204">M_last</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,76" id="srcline76"> 76</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S24T2U207">j</span>=<span class="mxinfo" id="T2:U141">1</span>:<span class="var type1" id="S19T2U210">M_last</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,77" id="srcline77"> 77</a></span><span class="line">                <span class="mxinfo" id="T2:U143"><span class="mxinfo" id="T2:U144"><span class="var type1" id="S23T58U214">dPiNorm</span>(<span class="var type1" id="S24T2U215">j</span>)</span> = <span class="mxinfo" id="T2:U147">normest(<span class="mxinfo" id="T45:U148"><span class="var type1" id="S21T48U219">dPi</span>(:,<span class="var type1" id="S24T2U221">j</span>)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,78" id="srcline78"> 78</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,79" id="srcline79"> 79</a></span><span class="line">            </span></span>
<span class="srcline"><span class="lineno"><a href="91,80" id="srcline80"> 80</a></span><span class="line">            <span class="mxinfo" id="T2:U151">[<span class="var type1" id="S15T58U226">dPi_ConJudge</span>(<span class="var type1" id="S20T2U227">i</span>),<span class="var type1" id="S26T2U228">min_last_i</span>] = min(<span class="var type1" id="S23T58U231">dPiNorm</span>)</span>;     <span class="comment">% min_last_i 为当前点对应连续的上一时刻点的序号</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,81" id="srcline81"> 81</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo" id="T3:U156"><span class="mxinfo" id="T2:U157">normest(<span class="mxinfo" id="T2:U158"><span class="var type1" id="S15T58U238">dPi_ConJudge</span>(<span class="var type1" id="S20T2U239">i</span>)</span>)</span> &lt; <span class="mxinfo" id="T1:U161"><span class="var type1" id="S7T72U241">makerTrackThreshold</span>.MaxContinuesDisplacement</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,82" id="srcline82"> 82</a></span><span class="line">                <span class="comment">%  otherMakers_k.Position( :,i ) 与 otherMakers_k_last.Position(:,min_last_i) 连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,83" id="srcline83"> 83</a></span><span class="line">                <span class="comment">% 找到一个连续的点，记录上一点</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,84" id="srcline84"> 84</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo" id="T3:U163">~<span class="mxinfo" id="T3:U164">isnan(<span class="var type1" id="S17T2U249">last_Tracked_i</span>)</span></span> &amp;&amp; <span class="mxinfo" id="T3:U166"><span class="var type1" id="S17T2U251">last_Tracked_i</span>==<span class="var type1" id="S26T2U252">min_last_i</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,85" id="srcline85"> 85</a></span><span class="line">                    <span class="mxinfo" id="T2:U169"><span class="mxinfo" id="T2:U170"><span class="mxinfo" id="T64:U171"><span class="var type1" id="S2T62U257">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S20T2U259">i</span>)</span> = <span class="mxinfo" id="T2:U174">1</span></span> ; <span class="comment">% 和跟踪成功的点连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,86" id="srcline86"> 86</a></span><span class="line">                <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,87" id="srcline87"> 87</a></span><span class="line">                    <span class="mxinfo" id="T2:U175"><span class="mxinfo" id="T2:U176"><span class="mxinfo" id="T64:U177"><span class="var type1" id="S2T62U266">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S20T2U268">i</span>)</span> = <span class="mxinfo" id="T2:U180">2</span></span> ; <span class="comment">% 和跟踪失败的点连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,88" id="srcline88"> 88</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,89" id="srcline89"> 89</a></span><span class="line">                </span></span>
<span class="srcline"><span class="lineno"><a href="91,90" id="srcline90"> 90</a></span><span class="line">                <span class="mxinfo" id="T2:U181"><span class="mxinfo" id="T2:U182"><span class="mxinfo" id="T64:U183"><span class="var type1" id="S2T62U274">otherMakers_k</span>.ContinuesLasti</span>(<span class="var type1" id="S20T2U276">i</span>)</span> = <span class="var type1" id="S26T2U277">min_last_i</span></span>;  <span class="comment">% 记录紧邻的上一时刻马克点序号</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,91" id="srcline91"> 91</a></span><span class="line">                <span class="comment">% 如果前一个点为连续点，则将前一个点的连续记录传递过来</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,92" id="srcline92"> 92</a></span><span class="line">                <span class="keyword">if</span> <span class="mxinfo" id="T3:U187"><span class="mxinfo" id="T2:U188"><span class="mxinfo" id="T64:U189"><span class="var type1" id="S4T62U283">otherMakers_k_last</span>.ContinuesFlag</span>(<span class="var type1" id="S26T2U285">min_last_i</span>)</span> == <span class="mxinfo" id="T2:U192">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,93" id="srcline93"> 93</a></span><span class="line">                    </span></span>
<span class="srcline"><span class="lineno"><a href="91,94" id="srcline94"> 94</a></span><span class="line">                    <span class="mxinfo" id="T2:U193"><span class="mxinfo" id="T2:U194"><span class="mxinfo" id="T64:U195"><span class="var type1" id="S2T62U291">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S20T2U293">i</span>)</span> = <span class="mxinfo" id="T2:U198"><span class="mxinfo" id="T64:U199"><span class="var type1" id="S4T62U296">otherMakers_k_last</span>.ContinuesLastK</span>(<span class="var type1" id="S26T2U298">min_last_i</span>)</span></span> ; <span class="comment">% 传递记录上一个时刻存储的连续信息</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,95" id="srcline95"> 95</a></span><span class="line">                    <span class="mxinfo" id="T45:U202"><span class="mxinfo" id="T45:U203"><span class="mxinfo" id="T63:U204"><span class="var type1" id="S2T62U303">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S20T2U306">i</span>)</span> = <span class="mxinfo" id="T45:U207"><span class="mxinfo" id="T63:U208"><span class="var type1" id="S4T62U309">otherMakers_k_last</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S26T2U312">min_last_i</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,96" id="srcline96"> 96</a></span><span class="line">                    <span class="mxinfo" id="T2:U211"><span class="mxinfo" id="T2:U212"><span class="mxinfo" id="T64:U213"><span class="var type1" id="S2T62U317">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S20T2U319">i</span>)</span> = <span class="mxinfo" id="T2:U216"><span class="mxinfo" id="T64:U217"><span class="var type1" id="S4T62U322">otherMakers_k_last</span>.ContinuesLastTime</span>(<span class="var type1" id="S26T2U324">min_last_i</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,97" id="srcline97"> 97</a></span><span class="line">                <span class="keyword">elseif</span> <span class="mxinfo" id="T3:U220"><span class="mxinfo" id="T2:U221"><span class="mxinfo" id="T64:U222"><span class="var type1" id="S4T62U330">otherMakers_k_last</span>.ContinuesFlag</span>(<span class="var type1" id="S26T2U332">min_last_i</span>)</span> == <span class="mxinfo" id="T2:U225">0</span></span> || <span class="mxinfo" id="T3:U226">isnan(<span class="mxinfo" id="T2:U227"><span class="mxinfo" id="T64:U228"><span class="var type1" id="S4T62U338">otherMakers_k_last</span>.ContinuesFlag</span>(<span class="var type1" id="S26T2U340">min_last_i</span>)</span>)</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,98" id="srcline98"> 98</a></span><span class="line">                    <span class="mxinfo" id="T2:U231"><span class="mxinfo" id="T2:U232"><span class="mxinfo" id="T64:U233"><span class="var type1" id="S2T62U345">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S20T2U347">i</span>)</span> = <span class="mxinfo" id="T2:U236"><span class="var type1" id="S6T2U349">k_vision</span>-<span class="mxinfo" id="T2:U238">1</span></span></span> ; <span class="comment">% 直接记录上一个时刻</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,99" id="srcline99"> 99</a></span><span class="line">                    <span class="mxinfo" id="T45:U239"><span class="mxinfo" id="T45:U240"><span class="mxinfo" id="T63:U241"><span class="var type1" id="S2T62U355">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S20T2U358">i</span>)</span> = <span class="mxinfo" id="T45:U244"><span class="mxinfo" id="T63:U245"><span class="var type1" id="S4T62U361">otherMakers_k_last</span>.Position</span>( :,<span class="var type1" id="S26T2U364">min_last_i</span> )</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,100" id="srcline100">100</a></span><span class="line">                    <span class="mxinfo" id="T2:U248"><span class="mxinfo" id="T2:U249"><span class="mxinfo" id="T64:U250"><span class="var type1" id="S2T62U369">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S20T2U371">i</span>)</span> = <span class="mxinfo" id="T2:U253"><span class="var type1" id="S4T62U373">otherMakers_k_last</span>.time</span></span> ;                    </span></span>
<span class="srcline"><span class="lineno"><a href="91,101" id="srcline101">101</a></span><span class="line">                <span class="keyword">elseif</span> <span class="mxinfo" id="T3:U255"><span class="mxinfo" id="T2:U256"><span class="mxinfo" id="T64:U257"><span class="var type1" id="S4T62U379">otherMakers_k_last</span>.ContinuesFlag</span>(<span class="var type1" id="S26T2U381">min_last_i</span>)</span> == <span class="mxinfo" id="T2:U260">1</span></span> </span></span>
<span class="srcline"><span class="lineno"><a href="91,102" id="srcline102">102</a></span><span class="line">                    <span class="comment">% 与跟踪成功点连续检测成功，但跟踪识别失败的情况，传递到现在。如果传递时间超过2秒，则不再传递。</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,103" id="srcline103">103</a></span><span class="line">                    <span class="keyword">if</span> <span class="mxinfo" id="T3:U261">(<span class="mxinfo" id="T2:U262"><span class="mxinfo" id="T2:U263"><span class="mxinfo" id="T64:U264"><span class="var type1" id="S4T62U390">otherMakers_k_last</span>.ContinuesLastTime</span>(<span class="var type1" id="S26T2U392">min_last_i</span>)</span>-<span class="mxinfo" id="T2:U267"><span class="var type1" id="S2T62U394">otherMakers_k</span>.time</span></span>) &gt; <span class="mxinfo" id="T2:U269">20</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,104" id="srcline104">104</a></span><span class="line">                        <span class="mxinfo" id="T2:U270"><span class="mxinfo" id="T2:U271"><span class="mxinfo" id="T64:U272"><span class="var type1" id="S2T62U401">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S20T2U403">i</span>)</span> = <span class="mxinfo" id="T2:U275">2</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,105" id="srcline105">105</a></span><span class="line">                    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,106" id="srcline106">106</a></span><span class="line">                        <span class="mxinfo" id="T2:U276"><span class="mxinfo" id="T2:U277"><span class="mxinfo" id="T64:U278"><span class="var type1" id="S2T62U410">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S20T2U412">i</span>)</span> = <span class="mxinfo" id="T2:U281">1</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,107" id="srcline107">107</a></span><span class="line">                    <span class="keyword">end</span>                    </span></span>
<span class="srcline"><span class="lineno"><a href="91,108" id="srcline108">108</a></span><span class="line">                    <span class="mxinfo" id="T2:U282"><span class="mxinfo" id="T2:U283"><span class="mxinfo" id="T64:U284"><span class="var type1" id="S2T62U418">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S20T2U420">i</span>)</span> = <span class="mxinfo" id="T2:U287"><span class="mxinfo" id="T64:U288"><span class="var type1" id="S4T62U423">otherMakers_k_last</span>.ContinuesLastK</span>(<span class="var type1" id="S26T2U425">min_last_i</span>)</span></span> ; <span class="comment">% 传递记录上一个时刻存储的连续信息</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,109" id="srcline109">109</a></span><span class="line">                    <span class="mxinfo" id="T45:U291"><span class="mxinfo" id="T45:U292"><span class="mxinfo" id="T63:U293"><span class="var type1" id="S2T62U430">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S20T2U433">i</span>)</span> = <span class="mxinfo" id="T45:U296"><span class="mxinfo" id="T63:U297"><span class="var type1" id="S4T62U436">otherMakers_k_last</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S26T2U439">min_last_i</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,110" id="srcline110">110</a></span><span class="line">                    <span class="mxinfo" id="T2:U300"><span class="mxinfo" id="T2:U301"><span class="mxinfo" id="T64:U302"><span class="var type1" id="S2T62U444">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S20T2U446">i</span>)</span> = <span class="mxinfo" id="T2:U305"><span class="mxinfo" id="T64:U306"><span class="var type1" id="S4T62U449">otherMakers_k_last</span>.ContinuesLastTime</span>(<span class="var type1" id="S26T2U451">min_last_i</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,111" id="srcline111">111</a></span><span class="line">                <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,112" id="srcline112">112</a></span><span class="line">            <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,113" id="srcline113">113</a></span><span class="line">                <span class="mxinfo" id="T2:U309"><span class="mxinfo" id="T2:U310"><span class="mxinfo" id="T64:U311"><span class="var type1" id="S2T62U457">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S20T2U459">i</span>)</span> = <span class="mxinfo" id="T2:U314">0</span></span> ; <span class="comment">% 不连续</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,114" id="srcline114">114</a></span><span class="line">                <span class="mxinfo" id="T45:U315"><span class="mxinfo" id="T45:U316"><span class="mxinfo" id="T63:U317"><span class="var type1" id="S2T62U465">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S20T2U468">i</span>)</span> = <span class="mxinfo" id="T2:U320">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,115" id="srcline115">115</a></span><span class="line">                <span class="mxinfo" id="T2:U321"><span class="mxinfo" id="T2:U322"><span class="mxinfo" id="T64:U323"><span class="var type1" id="S2T62U475">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S20T2U477">i</span>)</span> = <span class="mxinfo" id="T2:U326">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,116" id="srcline116">116</a></span><span class="line">                <span class="mxinfo" id="T2:U327"><span class="mxinfo" id="T2:U328"><span class="mxinfo" id="T64:U329"><span class="var type1" id="S2T62U484">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S20T2U486">i</span>)</span> = <span class="mxinfo" id="T2:U332">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,117" id="srcline117">117</a></span><span class="line">                <span class="mxinfo" id="T2:U333"><span class="mxinfo" id="T2:U334"><span class="mxinfo" id="T64:U335"><span class="var type1" id="S2T62U493">otherMakers_k</span>.ContinuesLasti</span>(<span class="var type1" id="S20T2U495">i</span>)</span> = <span class="mxinfo" id="T2:U338">NaN</span></span>;  <span class="comment">% 记录紧邻的上一时刻马克点序号</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,118" id="srcline118">118</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,119" id="srcline119">119</a></span><span class="line">            <span class="comment">% 如果之前已经有点对应着同一点，则保留最近的点的判断，其他给 NaN</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,120" id="srcline120">120</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S24T2U500">j</span>=<span class="mxinfo" id="T2:U340">1</span>:<span class="mxinfo" id="T2:U341"><span class="var type1" id="S20T2U504">i</span>-<span class="mxinfo" id="T2:U343">1</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,121" id="srcline121">121</a></span><span class="line">               <span class="keyword">if</span>  <span class="mxinfo" id="T3:U344"><span class="mxinfo" id="T2:U345"><span class="mxinfo" id="T64:U346"><span class="var type1" id="S2T62U511">otherMakers_k</span>.ContinuesLasti</span>(<span class="var type1" id="S24T2U513">j</span>)</span> == <span class="mxinfo" id="T2:U349"><span class="mxinfo" id="T64:U350"><span class="var type1" id="S2T62U516">otherMakers_k</span>.ContinuesLasti</span>(<span class="var type1" id="S20T2U518">i</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,122" id="srcline122">122</a></span><span class="line">                   <span class="keyword">if</span> <span class="mxinfo" id="T3:U353"><span class="mxinfo" id="T2:U354"><span class="var type1" id="S15T58U523">dPi_ConJudge</span>(<span class="var type1" id="S20T2U524">i</span>)</span> &lt; <span class="mxinfo" id="T2:U357"><span class="var type1" id="S15T58U526">dPi_ConJudge</span>(<span class="var type1" id="S24T2U527">j</span>)</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,123" id="srcline123">123</a></span><span class="line">                       <span class="comment">% 当前的点距离上时刻该点更近</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,124" id="srcline124">124</a></span><span class="line">                       <span class="mxinfo" id="T2:U360"><span class="mxinfo" id="T2:U361"><span class="mxinfo" id="T64:U362"><span class="var type1" id="S2T62U532">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S24T2U534">j</span>)</span> = <span class="mxinfo" id="T2:U365">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,125" id="srcline125">125</a></span><span class="line">                       <span class="mxinfo" id="T45:U366"><span class="mxinfo" id="T45:U367"><span class="mxinfo" id="T63:U368"><span class="var type1" id="S2T62U540">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S24T2U543">j</span>)</span> = <span class="mxinfo" id="T2:U371">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,126" id="srcline126">126</a></span><span class="line">                       <span class="mxinfo" id="T2:U372"><span class="mxinfo" id="T2:U373"><span class="mxinfo" id="T64:U374"><span class="var type1" id="S2T62U550">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S24T2U552">j</span>)</span> = <span class="mxinfo" id="T2:U377">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,127" id="srcline127">127</a></span><span class="line">                       <span class="mxinfo" id="T2:U378"><span class="mxinfo" id="T2:U379"><span class="mxinfo" id="T64:U380"><span class="var type1" id="S2T62U559">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S24T2U561">j</span>)</span> = <span class="mxinfo" id="T2:U383">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,128" id="srcline128">128</a></span><span class="line">                       <span class="mxinfo" id="T2:U384"><span class="mxinfo" id="T2:U385"><span class="mxinfo" id="T64:U386"><span class="var type1" id="S2T62U568">otherMakers_k</span>.ContinuesLasti</span>(<span class="var type1" id="S24T2U570">j</span>)</span> = <span class="mxinfo" id="T2:U389">NaN</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,129" id="srcline129">129</a></span><span class="line">                   <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,130" id="srcline130">130</a></span><span class="line">                       <span class="mxinfo" id="T2:U390"><span class="mxinfo" id="T2:U391"><span class="mxinfo" id="T64:U392"><span class="var type1" id="S2T62U578">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S20T2U580">i</span>)</span> = <span class="mxinfo" id="T2:U395">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,131" id="srcline131">131</a></span><span class="line">                       <span class="mxinfo" id="T45:U396"><span class="mxinfo" id="T45:U397"><span class="mxinfo" id="T63:U398"><span class="var type1" id="S2T62U586">otherMakers_k</span>.ContinuesLastPosition</span>(:,<span class="var type1" id="S20T2U589">i</span>)</span> = <span class="mxinfo" id="T2:U401">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,132" id="srcline132">132</a></span><span class="line">                       <span class="mxinfo" id="T2:U402"><span class="mxinfo" id="T2:U403"><span class="mxinfo" id="T64:U404"><span class="var type1" id="S2T62U596">otherMakers_k</span>.ContinuesLastTime</span>(<span class="var type1" id="S20T2U598">i</span>)</span> = <span class="mxinfo" id="T2:U407">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,133" id="srcline133">133</a></span><span class="line">                       <span class="mxinfo" id="T2:U408"><span class="mxinfo" id="T2:U409"><span class="mxinfo" id="T64:U410"><span class="var type1" id="S2T62U605">otherMakers_k</span>.ContinuesLastK</span>(<span class="var type1" id="S20T2U607">i</span>)</span> = <span class="mxinfo" id="T2:U413">NaN</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,134" id="srcline134">134</a></span><span class="line">                       <span class="mxinfo" id="T2:U414"><span class="mxinfo" id="T2:U415"><span class="mxinfo" id="T64:U416"><span class="var type1" id="S2T62U614">otherMakers_k</span>.ContinuesLasti</span>(<span class="var type1" id="S20T2U616">i</span>)</span> = <span class="mxinfo" id="T2:U419">NaN</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,135" id="srcline135">135</a></span><span class="line">                   <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,136" id="srcline136">136</a></span><span class="line">               <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,137" id="srcline137">137</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,138" id="srcline138">138</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,139" id="srcline139">139</a></span><span class="line">        <span class="comment">%%  记录 dPi_ConJudge 的最小值</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,140" id="srcline140">140</a></span><span class="line">        <span class="keyword">if</span> <span class="mxinfo" id="T3:U420"><span class="var type1" id="S10T2U622">M</span>&gt;<span class="mxinfo" id="T2:U422">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,141" id="srcline141">141</a></span><span class="line">            <span class="keyword">if</span> <span class="mxinfo" id="T2:U423"><span class="var type1" id="S15T58U629">dPi_ConJudge</span>(<span class="var type1" id="S20T2U630">i</span>)</span>&lt;<span class="var type1" id="S3T2U631">dPi_ConJudgeOut</span> || isnan(<span class="var type1" id="S3T2U634">dPi_ConJudgeOut</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="91,142" id="srcline142">142</a></span><span class="line">                <span class="mxinfo" id="T2:U428"><span class="var type1" id="S3T2U637">dPi_ConJudgeOut</span> = <span class="mxinfo" id="T2:U430"><span class="var type1" id="S15T58U639">dPi_ConJudge</span>(<span class="var type1" id="S20T2U640">i</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,143" id="srcline143">143</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,144" id="srcline144">144</a></span><span class="line">        <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,145" id="srcline145">145</a></span><span class="line">            <span class="mxinfo" id="T2:U433"><span class="var type1" id="S3T2U644">dPi_ConJudgeOut</span> = <span class="mxinfo" id="T2:U435">NaN</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,146" id="srcline146">146</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,147" id="srcline147">147</a></span><span class="line"><span class="comment">%     end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,148" id="srcline148">148</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,149" id="srcline149">149</a></span><span class="line">    <span class="mxinfo" id="T2:U436"><span class="var type1" id="S15T2U650">dPi_ConJudge</span>=<span class="mxinfo" id="T2:U438">nan</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,150" id="srcline150">150</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,151" id="srcline151">151</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,152" id="srcline152">152</a></span><span class="line"><span class="comment">%% 更新 otherMakers_k.InitialJointK</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,153" id="srcline153">153</a></span><span class="line"><span class="keyword">for</span> <span class="var type1" id="S20T2U655">i</span>=<span class="mxinfo" id="T2:U440">1</span>:<span class="var type1" id="S10T2U658">M</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,154" id="srcline154">154</a></span><span class="line">    <span class="mxinfo" id="T2:U442"><span class="var type1" id="S29T2U661">ContinuesLasti_i</span> = <span class="mxinfo" id="T2:U444"><span class="mxinfo" id="T64:U445"><span class="var type1" id="S2T62U664">otherMakers_k</span>.ContinuesLasti</span>(<span class="var type1" id="S20T2U666">i</span>)</span></span> ;</span></span>
<span class="srcline"><span class="lineno"><a href="91,155" id="srcline155">155</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo" id="T3:U448">~<span class="mxinfo" id="T3:U449">isnan(<span class="var type1" id="S29T2U673">ContinuesLasti_i</span>)</span></span> &amp;&amp; <span class="mxinfo" id="T3:U451"><span class="mxinfo" id="T2:U452"><span class="mxinfo" id="T64:U453"><span class="var type1" id="S2T62U677">otherMakers_k</span>.ContinuesFlag</span>(<span class="var type1" id="S20T2U679">i</span>)</span> &gt; <span class="mxinfo" id="T2:U456">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,156" id="srcline156">156</a></span><span class="line">        <span class="mxinfo" id="T2:U457"><span class="mxinfo" id="T2:U458"><span class="mxinfo" id="T64:U459"><span class="var type1" id="S2T62U685">otherMakers_k</span>.InitialJointK</span>(<span class="var type1" id="S20T2U687">i</span>)</span> = <span class="mxinfo" id="T2:U462"><span class="mxinfo" id="T64:U463"><span class="var type1" id="S4T62U690">otherMakers_k_last</span>.InitialJointK</span>(<span class="var type1" id="S29T2U692">ContinuesLasti_i</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="91,157" id="srcline157">157</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="91,158" id="srcline158">158</a></span><span class="line"><span class="keyword"><span class="keyword">end</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="91,159" id="srcline159">159</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="91,160" id="srcline160">160</a></span><span class="line"><span class="comment">% 根据 trackedMakerPosition_k 计算跟踪成功的马克点对应的序号（很不好的办法，但由于不想破坏之前的数据结构，暂时这么做）</span></span></span>
</pre>
